//****************************************************************************
//  CALIBRE DRC COMMAND FILE - C18_WIRE_BOND_6M.19_1a1 (08/30/2018)
//  FOR TSMC 0.18um BOND PAD 1P6M DESIGN RULE PROCESS
//  (DESIGN RULE DOCUMENT:      T-000-CL-DR-002    Rev 1.9_1)
//  (DRC COMMAND FILE DOCUMENT: T-000-CL-DR-002-C1 Rev 1.9_1a1 )
//************************************************************************************
//* TSMC developed this deck using Mentor Graphics proprietary SVRF and TVF formats.
//* The deck is to be used only in Calibre tools.
//************************************************************************************


//OPTION SETUP
//=======

//#DEFINE PITCH_50_SINGLE        //Turn on to use IO cell (>=50um pitch) of the single_in_line pad ONLY
//#DEFINE PITCH_55_SINGLE        //Turn on to use IO cell (>=55um pitch) of the single_in_line pad ONLY
#DEFINE PITCH_60_STAGGER       //Turn on to use IO cell (>=60um pitch) of the staggered pad ONLY
//#DEFINE PITCH_70_STAGGER       //Turn on to use IO cell (>=70um pitch) of the staggered pad ONLY
//#DEFINE PITCH_80_STAGGER       //Turn on to use IO cell (>=80um pitch) of the staggered pad ONLY
//#DEFINE PITCH_80_TRITIER       //Turn on to use IO cell (>=80um pitch) of the tri_tier pad ONLY
//#DEFINE MIX                    //Turn on if more than one kind of pad structure (Single, Stagger,Tri-tier) are used. 
/* Please note that only one kind of pitch can exist for each pad structure (single_in_line, stagger, tri_tier) */

//#DEFINE TRL_CUP   // Turn on if triple line cup pad structure be used,turn off if the cup pad structure is OBV(one big via) or SM(single metal).
//#DEFINE OBV_CUP   // Turn on if one big via cup pad structure be used,turn off if the cup pad structure is TRL(triple line) or SM(single metal).
//#DEFINE TRL_DFS   // Turn on if diamond via array deformation via array + Trl for cu process,turn off if the DFSP structrue is fully stacking or OBV.
//#DEFINE OBV_DFS   // Turn on if diamond via array deformation via array + obv for cu process,turn off if the DFSP structrue is fully stacking or Trl.

// ENVIRONMENT SETUP
//==================
PRECISION    1000
RESOLUTION      5

LAYOUT SYSTEM GDSII
LAYOUT PATH "./gds/mavg.gds"
LAYOUT PRIMARY "mavg"

DRC RESULTS DATABASE "./drc/WB_DRC_RES.db"
DRC SUMMARY REPORT "./drc/WB_DRC.rep"
DRC KEEP EMPTY NO
DRC CHECK TEXT ALL
DRC MAXIMUM RESULTS ALL

FLAG OFFGRID YES
FLAG ACUTE YES
FLAG SKEW YES
FLAG NONSIMPLE YES
FLAG NONSIMPLE PATH YES

VARIABLE SRwidth    15.0 // width of seal ring including assembly isolation region

// DRAWN LAYER DEFINITIONS
//------------------------
LAYER  FWi	235 // fuse window
LAYER MAP 63 DATATYPE 1 631
LAYER LMARKi 631
LAYER  WBDMY 183
LAYER MAP 131 DATATYPE 20 13120
LAYER  CTMDMY_2FF 13120
LAYER  EMPTY1     6000          
LAYER  EMPTY2     6001
LAYER  EMPTY3     6002
LAYER  UBM 	  170             // under bump metallurgy
LAYER  COi	  15		// Contact
LAYER  M1i        16  		// M1 layer
LAYER  VIA1i      17  		// VIA1 for M2 to M1
LAYER  M2i        18  		// M2 layer
LAYER  VIA2i      27  		// VIA2 for M3 to M2
LAYER  M3i        28  		// M3 layer
LAYER  VIA3i      29  		// VIA3 for M4 to M3
LAYER  M4i        31  		// M4 layer
LAYER  VIA4i      32  		// VIA4 for M5 to M4
LAYER  M5i        33  		// M5 layer
LAYER  VIA5i      39  		// VIA5 for M6 to M5
LAYER  M6i        38  		// M6 layer
LAYER  CBi        19  		// passivation window
LAYER  PLMIDEi    89   		// drawn polymide window
LAYER  PMDMY     236  		// dummy layer to cover fuse area
LAYER  EXCL       55  		// DRC exclusion layer

// Dummy Metal and Metal Slot layers
//----------------------------------
LAYER MAP 16 DATATYPE 1 411     // Mapping (16:1) to 411 for M1DMY
LAYER MAP 18 DATATYPE 1 421     // Mapping (18:1) to 421 for M2DMY
LAYER MAP 28 DATATYPE 1 431     // Mapping (28:1) to 431 for M3DMY
LAYER MAP 31 DATATYPE 1 441     // Mapping (31:1) to 441 for M4DMY
LAYER MAP 33 DATATYPE 1 451     // Mapping (33:1) to 451 for M5DMY
LAYER MAP 38 DATATYPE 1 461     // Mapping (38:1) to 461 for M6DMY
LAYER MAP 16 DATATYPE 2 412     // Mapping (16:2) to 412 for M1SLOT
LAYER MAP 18 DATATYPE 2 422     // Mapping (18:2) to 422 for M2SLOT
LAYER MAP 28 DATATYPE 2 432     // Mapping (28:2) to 432 for M3SLOT
LAYER MAP 31 DATATYPE 2 442     // Mapping (31:2) to 442 for M4SLOT
LAYER MAP 33 DATATYPE 2 452     // Mapping (33:2) to 452 for M5SLOT
LAYER MAP 38 DATATYPE 2 462     // Mapping (38:2) to 462 for M6SLOT

LAYER  M1DMY	411  		// drawn dummy M1
LAYER  M2DMY	421  		// drawn dummy M2
LAYER  M3DMY	431  		// drawn dummy M3
LAYER  M4DMY	441  		// drawn dummy M4
LAYER  M5DMY	451  		// drawn dummy M5
LAYER  M6DMY	461  		// drawn dummy M6
LAYER  M1SLOT	412  		// drawn M1 slot
LAYER  M2SLOT	422  		// drawn M2 slot
LAYER  M3SLOT	432  		// drawn M3 slot
LAYER  M4SLOT	442  		// drawn M4 slot
LAYER  M5SLOT	452  		// drawn M5 slot
LAYER  M6SLOT	462  		// drawn M6 slot

// GLOBAL DERIVED LAYERS FOR RULE CHECKS
//--------------------------------------
CHIP	= EXTENT
BULK	= SIZE CHIP BY 1.0
CBHO	= HOLES CBi
CHIP_CORE  = SIZE CHIP BY -SRwidth
SCORE	= CHIP_CORE INSIDE CBHO
SR_EDGE	= (CHIP INTERACT SCORE) NOT SCORE
CHIP_NOSR  = CHIP NOT INTERACT SR_EDGE   // chip w/o sealring(tsmc added)
CHIP_SR = CHIP INTERACT SR_EDGE	// chip w/i sealring(customer added)
CHIP_EDGE  = CHIP_NOSR OR SCORE
SR_CHIP   = CHIP INTERACT SCORE
SR = SR_CHIP NOT (SIZE SR_CHIP BY -10)


FW = COPY FWi
LMARK = COPY LMARKi
// EXCLUDE UNCHECKED REGIONS
//--------------------------
M1	= ((M1i OR M1DMY) NOT M1SLOT) NOT EXCL
M1_NODMY = (M1i NOT M1SLOT) NOT EXCL
M2	= ((M2i OR M2DMY) NOT M2SLOT) NOT EXCL
M2_NODMY = (M2i NOT M2SLOT) NOT EXCL
M3	= ((M3i OR M3DMY) NOT M3SLOT) NOT EXCL
M3_NODMY = (M3i NOT M3SLOT) NOT EXCL
M4	= ((M4i OR M4DMY) NOT M4SLOT) NOT EXCL
M4_NODMY = (M4i NOT M4SLOT) NOT EXCL
M5	= ((M5i OR M5DMY) NOT M5SLOT) NOT EXCL
M5_NODMY = (M5i NOT M5SLOT) NOT EXCL
M6	= ((M6i OR M6DMY) NOT M6SLOT) NOT EXCL
M6_NODMY = (M6i NOT M6SLOT) NOT EXCL
CO	= COi	  NOT EXCL
VIA1	= VIA1i   NOT EXCL
VIA2	= VIA2i   NOT EXCL
VIA3	= VIA3i   NOT EXCL
VIA4	= VIA4i   NOT EXCL
VIA5	= VIA5i   NOT EXCL
CB_SR	= ENCLOSE RECTANGLE CBi 0.005 200
CBx	= ((CBi NOT PMDMY) OUTSIDE CB_SR) NOT EXCL
PM	= PLMIDEi NOT EXCL


PAD_CB = ((CBi NOT SR_EDGE ) NOT EXCL ) NOT PMDMY
PAD_CB_BOX = EXTENT PAD_CB
INNER_RING = SIZE PAD_CB_BOX BY -220
MID_RING = SIZE PAD_CB_BOX BY -10


#IFDEF MIX
INNER_CB_TR = PAD_CB INSIDE INNER_RING
CB_ROW23 = PAD_CB INSIDE MID_RING
CB_ROW2 = CB_ROW23 NOT INNER_CB_TR
A = EXT INNER_CB_TR CB_ROW2 < 80 OPPOSITE REGION
MID_CB_TR = CB_ROW2 INTERACT A
INNER_CB_ST = CB_ROW2 NOT MID_CB_TR
CB_ROW1 = PAD_CB NOT INTERACT CB_ROW23
B = EXT MID_CB_TR CB_ROW1 < 80 OPPOSITE REGION
OUTER_CB_TR = CB_ROW1 INTERACT B
C = EXT INNER_CB_ST CB_ROW1 < 70 OPPOSITE REGION
OUTER_CB_ST = CB_ROW1 INTERACT C
#ELSE
#IFDEF PITCH_50_SINGLE
INNER_CB_TR = COPY EMPTY1
MID_CB_TR = COPY EMPTY2
INNER_CB_ST = COPY EMPTY1
CB_ROW1 = COPY PAD_CB 
OUTER_CB_TR = COPY EMPTY3  
OUTER_CB_ST = COPY EMPTY2
#ELSE
#IFDEF PITCH_55_SINGLE
INNER_CB_TR = COPY EMPTY1
MID_CB_TR = COPY EMPTY2
INNER_CB_ST = COPY EMPTY1
CB_ROW1 = COPY PAD_CB 
OUTER_CB_TR = COPY EMPTY3  
OUTER_CB_ST = COPY EMPTY2
#ELSE
#IFDEF PITCH_60_STAGGER
INNER_CB_TR = COPY EMPTY1
CB_ROW23 = PAD_CB INSIDE MID_RING
CB_ROW2 = CB_ROW23 NOT INNER_CB_TR
MID_CB_TR = COPY EMPTY2
INNER_CB_ST = CB_ROW2 NOT MID_CB_TR
CB_ROW1 = PAD_CB NOT INTERACT CB_ROW23
OUTER_CB_TR = COPY EMPTY3  
OUTER_CB_ST = COPY CB_ROW1 
#ELSE
#IFDEF PITCH_70_STAGGER
INNER_CB_TR = COPY EMPTY1
CB_ROW23 = PAD_CB INSIDE MID_RING
CB_ROW2 = CB_ROW23 NOT INNER_CB_TR
MID_CB_TR = COPY EMPTY2
INNER_CB_ST = CB_ROW2 NOT MID_CB_TR
CB_ROW1 = PAD_CB NOT INTERACT CB_ROW23
OUTER_CB_TR = COPY EMPTY3  
OUTER_CB_ST = COPY CB_ROW1 
#ELSE
#IFDEF PITCH_80_STAGGER
INNER_CB_TR = COPY EMPTY1
CB_ROW23 = PAD_CB INSIDE MID_RING
CB_ROW2 = CB_ROW23 NOT INNER_CB_TR
MID_CB_TR = COPY EMPTY2
INNER_CB_ST = CB_ROW2 NOT MID_CB_TR
CB_ROW1 = PAD_CB NOT INTERACT CB_ROW23
OUTER_CB_TR = COPY EMPTY3  
OUTER_CB_ST = COPY CB_ROW1 
#ELSE
#IFDEF PITCH_80_TRITIER
INNER_CB_TR = PAD_CB INSIDE INNER_RING
CB_ROW23 = PAD_CB INSIDE MID_RING
CB_ROW2 = CB_ROW23 NOT INNER_CB_TR
MID_CB_TR = COPY CB_ROW2 
INNER_CB_ST = COPY EMPTY1
CB_ROW1 = PAD_CB NOT INTERACT CB_ROW23
OUTER_CB_TR = COPY CB_ROW1 
OUTER_CB_ST = COPY EMPTY2
#ELSE
INNER_CB_TR = COPY EMPTY1
MID_CB_TR = COPY EMPTY2
INNER_CB_ST = COPY EMPTY1
CB_ROW1 = COPY EMPTY1 
OUTER_CB_TR = COPY EMPTY3  
OUTER_CB_ST = COPY EMPTY2
#ENDIF
#ENDIF
#ENDIF
#ENDIF
#ENDIF
#ENDIF
#ENDIF


OUTER_CB_ST_NON_CUP = OUTER_CB_ST NOT INTERACT WBDMY
INNER_CB_ST_NON_CUP = INNER_CB_ST NOT INTERACT WBDMY
OUTER_CB_TR_NON_CUP = OUTER_CB_TR NOT INTERACT WBDMY
INNER_CB_TR_NON_CUP = INNER_CB_TR NOT INTERACT WBDMY
MID_CB_TR_NON_CUP   = MID_CB_TR   NOT INTERACT WBDMY

CB_SINGLE_a = (CB_ROW1 NOT OUTER_CB_TR) NOT OUTER_CB_ST
notch_CB    = EXT CB_SINGLE_a <5 NOTCH OPPOSITE REGION    
CB_SINGLE   = CB_SINGLE_a OR notch_CB
CB_STAGGER = INNER_CB_ST OR OUTER_CB_ST 
CB_TRI_TIER = (INNER_CB_TR OR MID_CB_TR) OR OUTER_CB_TR
CB_SINGLE_SIZE3 = SIZE CB_SINGLE BY 3
CB_STAGGER_SIZE3 = SIZE CB_STAGGER BY 3
CB_TRI_TIER_SIZE3 = SIZE CB_TRI_TIER BY 3





CB = (CB_SINGLE OR CB_STAGGER) OR CB_TRI_TIER
CB_TRI_TIER_NON_CUP = CB_TRI_TIER NOT INTERACT WBDMY
CB_STAGGER_NON_CUP  = CB_STAGGER  NOT INTERACT WBDMY
CB_SINGLE_NON_CUP   = CB_SINGLE   NOT INTERACT WBDMY
CB_TRI_TIER_CUP     = CB_TRI_TIER INTERACT WBDMY
CB_STAGGER_CUP      = CB_STAGGER  INTERACT WBDMY
CB_SINGLE_CUP       = CB_SINGLE   INTERACT WBDMY 
CB_CUP              = CB INTERACT WBDMY
CB_NON_CUP          = CB NOT INTERACT WBDMY


CB_SINGLE_NON_CUP_SIZE3 = SIZE CB_SINGLE_NON_CUP BY 3
CB_STAGGER_NON_CUP_SIZE3 = SIZE CB_STAGGER_NON_CUP BY 3
CB_TRI_TIER_NON_CUP_SIZE3 = SIZE CB_TRI_TIER_NON_CUP BY 3
CB_CUP_SIZE3 = SIZE CB_CUP BY 3

M5CB_CUP = M5 AND CB_CUP_SIZE3
M6CB_CUP = M6 AND CB_CUP_SIZE3
//=====================================================

// Pad identification
//-------------------
#IFDEF PITCH_50_SINGLE
#IFDEF OBV_CUP
#IFNDEF OBV_DFS
VARIABLE sz_si_a 21.69	// [(43+0.4)/2 -0.01]    // sizing value to find pad metal
#ENDIF
#ENDIF
#IFDEF OBV_DFS
#IFNDEF OBV_CUP
VARIABLE sz_si_a 21.69	// [(43+0.4)/2 -0.01]    // sizing value to find pad metal
#ENDIF
#ENDIF
#IFNDEF OBV_CUP
#IFNDEF OBV_DFS
VARIABLE sz_si_a 23.49	// [(43+4)/2 -0.01]    // sizing value to find pad metal
#ENDIF
#ENDIF
#IFDEF OBV_CUP
#IFDEF OBV_DFS
VARIABLE sz_si_a 21.69	// [(43+0.4)/2 -0.01]    // sizing value to find pad metal
#ENDIF
#ENDIF
VARIABLE sz_si 23.49	// [(43+4)/2 -0.01]    // sizing value to find pad metal
#ELSE
#IFDEF OBV_CUP
#IFNDEF OBV_DFS
VARIABLE sz_si_a 24.19	// [(48+0.4)/2 -0.01]
#ENDIF
#ENDIF
#IFDEF OBV_DFS
#IFNDEF OBV_CUP
VARIABLE sz_si_a 24.19	// [(48+0.4)/2 -0.01]
#ENDIF
#ENDIF
#IFNDEF OBV_CUP
#IFNDEF OBV_DFS
VARIABLE sz_si_a 25.99	// [(48+4)/2 -0.01]
#ENDIF
#ENDIF
#IFDEF OBV_CUP
#IFDEF OBV_DFS
VARIABLE sz_si_a 24.19  // [(48+0.4)/2 -0.01]
#ENDIF
#ENDIF
VARIABLE sz_si 25.99	// [(48+4)/2 -0.01]
#ENDIF

#IFDEF PITCH_60_STAGGER
VARIABLE sz_st 28.49  	// [(53+4)/2 -0.01]
VARIABLE sz1_st 9.99	// [(20/2)   -0.01]
#ELSE
#IFDEF PITCH_70_STAGGER
VARIABLE sz_st 30.99  	// [(58+4)/2 -0.01]
VARIABLE sz1_st 22.49	// [(45/2)   -0.01]
#ELSE
VARIABLE sz_st 34.49  	// [(65+4)/2 -0.01]
VARIABLE sz1_st 24.99	// [(50/2)   -0.01]
#ENDIF
#ENDIF


VARIABLE sz_tr 24.99	// [(50/2)   -0.01]

// pad metal
M1CB_SI = M1 AND CB_SINGLE_SIZE3  // New Approach
M1CB_SI_NON_CUP = M1 AND CB_SINGLE_NON_CUP_SIZE3
M2CB_SI = M2 AND CB_SINGLE_SIZE3  // New Approach
M2CB_SI_NON_CUP = M2 AND CB_SINGLE_NON_CUP_SIZE3
M3CB_SI = M3 AND CB_SINGLE_SIZE3  // New Approach
M3CB_SI_NON_CUP = M3 AND CB_SINGLE_NON_CUP_SIZE3
M4CB_SI = M4 AND CB_SINGLE_SIZE3  // New Approach
M4CB_SI_NON_CUP = M4 AND CB_SINGLE_NON_CUP_SIZE3
M5CB_SI = M5 AND CB_SINGLE_SIZE3  // New Approach
M5CB_SI_NON_CUP = M5 AND CB_SINGLE_NON_CUP_SIZE3
M6CB_SI = M6 AND CB_SINGLE_SIZE3  // New Approach
M6CB_SI_NON_CUP = M6 AND CB_SINGLE_NON_CUP_SIZE3
SHKM1_SI = SHRINK(SHRINK(SHRINK(SHRINK M1CB_SI RIGHT BY sz_si) TOP BY sz_si) LEFT BY sz_si) BOTTOM BY sz_si
GROM1_SI = GROW(GROW(GROW(GROW SHKM1_SI RIGHT BY sz_si) TOP BY sz_si) LEFT BY sz_si) BOTTOM BY sz_si
SHKM2_SI = SHRINK(SHRINK(SHRINK(SHRINK M2CB_SI RIGHT BY sz_si) TOP BY sz_si) LEFT BY sz_si) BOTTOM BY sz_si
GROM2_SI = GROW(GROW(GROW(GROW SHKM2_SI RIGHT BY sz_si) TOP BY sz_si) LEFT BY sz_si) BOTTOM BY sz_si
SHKM3_SI = SHRINK(SHRINK(SHRINK(SHRINK M3CB_SI RIGHT BY sz_si) TOP BY sz_si) LEFT BY sz_si) BOTTOM BY sz_si
GROM3_SI = GROW(GROW(GROW(GROW SHKM3_SI RIGHT BY sz_si) TOP BY sz_si) LEFT BY sz_si) BOTTOM BY sz_si
SHKM4_SI = SHRINK(SHRINK(SHRINK(SHRINK M4CB_SI RIGHT BY sz_si) TOP BY sz_si) LEFT BY sz_si) BOTTOM BY sz_si
GROM4_SI = GROW(GROW(GROW(GROW SHKM4_SI RIGHT BY sz_si) TOP BY sz_si) LEFT BY sz_si) BOTTOM BY sz_si
SHKM5_SI = SHRINK(SHRINK(SHRINK(SHRINK M5CB_SI RIGHT BY sz_si_a) TOP BY sz_si_a) LEFT BY sz_si_a) BOTTOM BY sz_si_a
GROM5_SI = GROW(GROW(GROW(GROW SHKM5_SI RIGHT BY sz_si_a) TOP BY sz_si_a) LEFT BY sz_si_a) BOTTOM BY sz_si_a
SHKM6_SI = SHRINK(SHRINK(SHRINK(SHRINK M6CB_SI RIGHT BY sz_si) TOP BY sz_si) LEFT BY sz_si) BOTTOM BY sz_si
GROM6_SI = GROW(GROW(GROW(GROW SHKM6_SI RIGHT BY sz_si) TOP BY sz_si) LEFT BY sz_si) BOTTOM BY sz_si

M1CB_ST = M1 AND CB_STAGGER_SIZE3  // New Approach
M1CB_ST_NON_CUP = M1 AND CB_STAGGER_NON_CUP_SIZE3
M2CB_ST = M2 AND CB_STAGGER_SIZE3  // New Approach
M2CB_ST_NON_CUP = M2 AND CB_STAGGER_NON_CUP_SIZE3
M3CB_ST = M3 AND CB_STAGGER_SIZE3  // New Approach
M3CB_ST_NON_CUP = M3 AND CB_STAGGER_NON_CUP_SIZE3
M4CB_ST = M4 AND CB_STAGGER_SIZE3  // New Approach
M4CB_ST_NON_CUP = M4 AND CB_STAGGER_NON_CUP_SIZE3
M5CB_ST = M5 AND CB_STAGGER_SIZE3  // New Approach
M5CB_ST_NON_CUP = M5 AND CB_STAGGER_NON_CUP_SIZE3
M6CB_ST = M6 AND CB_STAGGER_SIZE3  // New Approach
M6CB_ST_NON_CUP = M6 AND CB_STAGGER_NON_CUP_SIZE3
SHKM1_ST = SHRINK(SHRINK(SHRINK(SHRINK M1CB_ST RIGHT BY sz1_st) TOP BY sz1_st) LEFT BY sz1_st) BOTTOM BY sz1_st
GROM1_ST = GROW(GROW(GROW(GROW SHKM1_ST RIGHT BY sz1_st) TOP BY sz1_st) LEFT BY sz1_st) BOTTOM BY sz1_st

SHKM2_ST = SHRINK(SHRINK(SHRINK(SHRINK M2CB_ST RIGHT BY sz1_st) TOP BY sz1_st) LEFT BY sz1_st) BOTTOM BY sz1_st
GROM2_ST = GROW(GROW(GROW(GROW SHKM2_ST RIGHT BY sz1_st) TOP BY sz1_st) LEFT BY sz1_st) BOTTOM BY sz1_st

SHKM3_ST = SHRINK(SHRINK(SHRINK(SHRINK M3CB_ST RIGHT BY sz1_st) TOP BY sz1_st) LEFT BY sz1_st) BOTTOM BY sz1_st
GROM3_ST = GROW(GROW(GROW(GROW SHKM3_ST RIGHT BY sz1_st) TOP BY sz1_st) LEFT BY sz1_st) BOTTOM BY sz1_st

SHKM4_ST = SHRINK(SHRINK(SHRINK(SHRINK M4CB_ST RIGHT BY sz_st) TOP BY sz_st) LEFT BY sz_st) BOTTOM BY sz_st
GROM4_ST = GROW(GROW(GROW(GROW SHKM4_ST RIGHT BY sz_st) TOP BY sz_st) LEFT BY sz_st) BOTTOM BY sz_st

SHKM5_ST = SHRINK(SHRINK(SHRINK(SHRINK M5CB_ST RIGHT BY sz_st) TOP BY sz_st) LEFT BY sz_st) BOTTOM BY sz_st
GROM5_ST = GROW(GROW(GROW(GROW SHKM5_ST RIGHT BY sz_st) TOP BY sz_st) LEFT BY sz_st) BOTTOM BY sz_st

SHKM6_ST = SHRINK(SHRINK(SHRINK(SHRINK M6CB_ST RIGHT BY sz_st) TOP BY sz_st) LEFT BY sz_st) BOTTOM BY sz_st
GROM6_ST = GROW(GROW(GROW(GROW SHKM6_ST RIGHT BY sz_st) TOP BY sz_st) LEFT BY sz_st) BOTTOM BY sz_st


M1CB_TR = M1 AND CB_TRI_TIER_SIZE3   // New Approach
M1CB_TR_NON_CUP = M1 AND CB_TRI_TIER_NON_CUP_SIZE3   // New Approach
M2CB_TR = M2 AND CB_TRI_TIER_SIZE3   // New Approach
M2CB_TR_NON_CUP = M2 AND CB_TRI_TIER_NON_CUP_SIZE3   // New Approach
M3CB_TR = M3 AND CB_TRI_TIER_SIZE3   // New Approach
M3CB_TR_NON_CUP = M3 AND CB_TRI_TIER_NON_CUP_SIZE3   // New Approach
M4CB_TR = M4 AND CB_TRI_TIER_SIZE3   // New Approach
M4CB_TR_NON_CUP = M4 AND CB_TRI_TIER_NON_CUP_SIZE3   // New Approach
M5CB_TR = M5 AND CB_TRI_TIER_SIZE3   // New Approach
M5CB_TR_NON_CUP = M5 AND CB_TRI_TIER_NON_CUP_SIZE3   // New Approach
M6CB_TR = M6 AND CB_TRI_TIER_SIZE3   // New Approach
M6CB_TR_NON_CUP = M6 AND CB_TRI_TIER_NON_CUP_SIZE3   // New Approach
SHKM1_TR = SHRINK(SHRINK(SHRINK(SHRINK M1CB_TR RIGHT BY sz_tr) TOP BY sz_tr) LEFT BY sz_tr) BOTTOM BY sz_tr
GROM1_TR = GROW(GROW(GROW(GROW SHKM1_TR RIGHT BY sz_tr) TOP BY sz_tr) LEFT BY sz_tr) BOTTOM BY sz_tr
SHKM2_TR = SHRINK(SHRINK(SHRINK(SHRINK M2CB_TR RIGHT BY sz_tr) TOP BY sz_tr) LEFT BY sz_tr) BOTTOM BY sz_tr
GROM2_TR = GROW(GROW(GROW(GROW SHKM2_TR RIGHT BY sz_tr) TOP BY sz_tr) LEFT BY sz_tr) BOTTOM BY sz_tr
SHKM3_TR = SHRINK(SHRINK(SHRINK(SHRINK M3CB_TR RIGHT BY sz_tr) TOP BY sz_tr) LEFT BY sz_tr) BOTTOM BY sz_tr
GROM3_TR = GROW(GROW(GROW(GROW SHKM3_TR RIGHT BY sz_tr) TOP BY sz_tr) LEFT BY sz_tr) BOTTOM BY sz_tr
SHKM4_TR = SHRINK(SHRINK(SHRINK(SHRINK M4CB_TR RIGHT BY sz_tr) TOP BY sz_tr) LEFT BY sz_tr) BOTTOM BY sz_tr
GROM4_TR = GROW(GROW(GROW(GROW SHKM4_TR RIGHT BY sz_tr) TOP BY sz_tr) LEFT BY sz_tr) BOTTOM BY sz_tr
SHKM5_TR = SHRINK(SHRINK(SHRINK(SHRINK M5CB_TR RIGHT BY sz_tr) TOP BY sz_tr) LEFT BY sz_tr) BOTTOM BY sz_tr
GROM5_TR = GROW(GROW(GROW(GROW SHKM5_TR RIGHT BY sz_tr) TOP BY sz_tr) LEFT BY sz_tr) BOTTOM BY sz_tr
SHKM6_TR = SHRINK(SHRINK(SHRINK(SHRINK M6CB_TR RIGHT BY sz_tr) TOP BY sz_tr) LEFT BY sz_tr) BOTTOM BY sz_tr
GROM6_TR = GROW(GROW(GROW(GROW SHKM6_TR RIGHT BY sz_tr) TOP BY sz_tr) LEFT BY sz_tr) BOTTOM BY sz_tr

PADM1_SI = (GROM1_SI AND M1CB_SI) NOT INTERACT WBDMY
PADM1_ST = (GROM1_ST AND M1CB_ST) NOT INTERACT WBDMY
PADM1_TR = (GROM1_TR AND M1CB_TR) NOT INTERACT WBDMY 
PADM1 = (PADM1_SI OR PADM1_ST) OR PADM1_TR 
PADM2_SI = (GROM2_SI AND M2CB_SI) NOT INTERACT WBDMY
PADM2_ST = (GROM2_ST AND M2CB_ST) NOT INTERACT WBDMY
PADM2_TR = (GROM2_TR AND M2CB_TR) NOT INTERACT WBDMY 
PADM2 = (PADM2_SI OR PADM2_ST) OR PADM2_TR 
PADM3_SI = (GROM3_SI AND M3CB_SI) NOT INTERACT WBDMY
PADM3_ST = (GROM3_ST AND M3CB_ST) NOT INTERACT WBDMY
PADM3_TR = (GROM3_TR AND M3CB_TR) NOT INTERACT WBDMY 
PADM3 = (PADM3_SI OR PADM3_ST) OR PADM3_TR 
PADM4_SI = (GROM4_SI AND M4CB_SI) NOT INTERACT WBDMY
PADM4_ST = (GROM4_ST AND M4CB_ST) NOT INTERACT WBDMY
PADM4_TR = (GROM4_TR AND M4CB_TR) NOT INTERACT WBDMY 
PADM4 = (PADM4_SI OR PADM4_ST) OR PADM4_TR 
PADM5_SI = GROM5_SI AND M5CB_SI
PADM5_ST = GROM5_ST AND M5CB_ST
PADM5_TR = GROM5_TR AND M5CB_TR
PADM5 = (PADM5_SI OR PADM5_ST) OR PADM5_TR 
PADM6_SI = GROM6_SI AND M6CB_SI
PADM6_ST = GROM6_ST AND M6CB_ST
PADM6_TR = GROM6_TR AND M6CB_TR
PADM6 = (PADM6_SI OR PADM6_ST) OR PADM6_TR 

// pad via
PAD_VIA1_SI = VIA1 INTERACT PADM1_SI
PAD_VIA1_SI_NON_CUP = PAD_VIA1_SI NOT INTERACT WBDMY
PAD_VIA1_ST = VIA1 INTERACT PADM1_ST
PAD_VIA1_ST_NON_CUP = PAD_VIA1_ST NOT INTERACT WBDMY
PAD_VIA1_TR = VIA1 INTERACT PADM1_TR
PAD_VIA1_TR_NON_CUP = PAD_VIA1_TR NOT INTERACT WBDMY
PAD_VIA1 = (PAD_VIA1_SI OR PAD_VIA1_ST) OR PAD_VIA1_TR 
PAD_VIA1_NON_CUP = (PAD_VIA1_SI_NON_CUP OR PAD_VIA1_ST_NON_CUP) OR PAD_VIA1_TR_NON_CUP
PAD_VIA2_SI = VIA2 INTERACT PADM2_SI
PAD_VIA2_SI_NON_CUP = PAD_VIA2_SI NOT INTERACT WBDMY
PAD_VIA2_ST = VIA2 INTERACT PADM2_ST
PAD_VIA2_ST_NON_CUP = PAD_VIA2_ST NOT INTERACT WBDMY
PAD_VIA2_TR = VIA2 INTERACT PADM2_TR
PAD_VIA2_TR_NON_CUP = PAD_VIA2_TR NOT INTERACT WBDMY
PAD_VIA2 = (PAD_VIA2_SI OR PAD_VIA2_ST) OR PAD_VIA2_TR 
PAD_VIA2_NON_CUP = (PAD_VIA2_SI_NON_CUP OR PAD_VIA2_ST_NON_CUP) OR PAD_VIA2_TR_NON_CUP
PAD_VIA3_SI = VIA3 INTERACT PADM3_SI
PAD_VIA3_SI_NON_CUP = PAD_VIA3_SI NOT INTERACT WBDMY
PAD_VIA3_ST = VIA3 INTERACT PADM3_ST
PAD_VIA3_ST_NON_CUP = PAD_VIA3_ST NOT INTERACT WBDMY
PAD_VIA3_TR = VIA3 INTERACT PADM3_TR
PAD_VIA3_TR_NON_CUP = PAD_VIA3_TR NOT INTERACT WBDMY
PAD_VIA3 = (PAD_VIA3_SI OR PAD_VIA3_ST) OR PAD_VIA3_TR 
PAD_VIA3_NON_CUP = (PAD_VIA3_SI_NON_CUP OR PAD_VIA3_ST_NON_CUP) OR PAD_VIA3_TR_NON_CUP
PAD_VIA4_SI = VIA4 INTERACT PADM4_SI
PAD_VIA4_SI_NON_CUP = PAD_VIA4_SI NOT INTERACT WBDMY
PAD_VIA4_ST = VIA4 INTERACT PADM4_ST
PAD_VIA4_ST_NON_CUP = PAD_VIA4_ST NOT INTERACT WBDMY
PAD_VIA4_TR = VIA4 INTERACT PADM4_TR
PAD_VIA4_TR_NON_CUP = PAD_VIA4_TR NOT INTERACT WBDMY
PAD_VIA4 = (PAD_VIA4_SI OR PAD_VIA4_ST) OR PAD_VIA4_TR 
PAD_VIA4_NON_CUP = (PAD_VIA4_SI_NON_CUP OR PAD_VIA4_ST_NON_CUP) OR PAD_VIA4_TR_NON_CUP
PAD_VIA5_SI = VIA5 INTERACT PADM5_SI
PAD_VIA5_SI_NON_CUP = PAD_VIA5_SI NOT INTERACT WBDMY
PAD_VIA5_ST = VIA5 INTERACT PADM5_ST
PAD_VIA5_ST_NON_CUP = PAD_VIA5_ST NOT INTERACT WBDMY
PAD_VIA5_TR = VIA5 INTERACT PADM5_TR
PAD_VIA5_TR_NON_CUP = PAD_VIA5_TR NOT INTERACT WBDMY
PAD_VIA5 = (PAD_VIA5_SI OR PAD_VIA5_ST) OR PAD_VIA5_TR 
PAD_VIA5_NON_CUP = (PAD_VIA5_SI_NON_CUP OR PAD_VIA5_ST_NON_CUP) OR PAD_VIA5_TR_NON_CUP



// Pitch Setting Error
// =====================
#IFNDEF PITCH_50_SINGLE    
#IFNDEF PITCH_55_SINGLE 
#IFNDEF PITCH_60_STAGGER
#IFNDEF PITCH_70_STAGGER
#IFNDEF PITCH_80_STAGGER
#IFNDEF PITCH_80_TRITIER 
PITCH_OPTION.ERROR.1 { @ At least one of the pitch options must be selected.
  COPY CHIP
}
#ENDIF
#ENDIF
#ENDIF
#ENDIF
#ENDIF
#ENDIF

#IFDEF PITCH_50_SINGLE
#IFDEF PITCH_55_SINGLE
PITCH_OPTION.ERROR.2 { @ Only one kind of pitch option can be selected for single_in_line structure
  COPY CHIP
}
#ENDIF
#ENDIF
#IFDEF PITCH_60_STAGGER
#IFDEF PITCH_70_STAGGER
PITCH_OPTION.ERROR.3 { @ Only one kind of pitch can be selected for staggered structure
  COPY CHIP
}
#ENDIF
#ENDIF
#IFDEF PITCH_60_STAGGER
#IFDEF PITCH_80_STAGGER
PITCH_OPTION.ERROR.4 { @ Only one kind of pitch can be selected for staggered structure
  COPY CHIP
}
#ENDIF
#ENDIF
#IFDEF PITCH_70_STAGGER
#IFDEF PITCH_80_STAGGER
PITCH_OPTION.ERROR.5 { @ Only one kind of pitch can be selected for staggered structure
  COPY CHIP
}
#ENDIF
#ENDIF
#IFNDEF MIX

#IFDEF PITCH_50_SINGLE
#IFDEF PITCH_60_STAGGER
PITCH_OPTION.ERROR.6 { @ Please turn on 'MIX' option if more than one geometry (Single,Stagger,Tri-tier) are used. 
  COPY CHIP
}
#ENDIF
#IFDEF PITCH_70_STAGGER
PITCH_OPTION.ERROR.7 { @ Please turn on 'MIX' option if more than one geometry (Single,Stagger,Tri-tier) are used. 
  COPY CHIP
}
#ENDIF
#IFDEF PITCH_80_STAGGER
PITCH_OPTION.ERROR.8 { @ Please turn on 'MIX' option if more than one geometry (Single,Stagger,Tri-tier) are used. 
  COPY CHIP
}
#ENDIF
#IFDEF PITCH_80_TRITIER
PITCH_OPTION.ERROR.9 { @ Please turn on 'MIX' option if more than one geometry (Single,Stagger,Tri-tier) are used. 
  COPY CHIP
}
#ENDIF
#ENDIF
#IFDEF PITCH_55_SINGLE
#IFDEF PITCH_60_STAGGER
PITCH_OPTION.ERROR.10 { @ Please turn on 'MIX' option if more than one geometry (Single,Stagger,Tri-tier) are used. 
  COPY CHIP
}
#ENDIF
#IFDEF PITCH_70_STAGGER
PITCH_OPTION.ERROR.11 { @ Please turn on 'MIX' option if more than one geometry (Single,Stagger,Tri-tier) are used. 
  COPY CHIP
}
#ENDIF
#IFDEF PITCH_80_STAGGER
PITCH_OPTION.ERROR.12 { @ Please turn on 'MIX' option if more than one geometry (Single,Stagger,Tri-tier) are used. 
  COPY CHIP
}
#ENDIF
#IFDEF PITCH_80_TRITIER
PITCH_OPTION.ERROR.13 { @ Please turn on 'MIX' option if more than one geometry (Single,Stagger,Tri-tier) are used. 
  COPY CHIP
}
#ENDIF
#ENDIF
#IFDEF PITCH_80_TRITIER
#IFDEF PITCH_60_STAGGER
PITCH_OPTION.ERROR.14 { @ Please turn on 'MIX' option if more than one geometry (Stagger,Tri-tier) are used. 
  COPY CHIP
}
#ENDIF
#IFDEF PITCH_70_STAGGER
PITCH_OPTION.ERROR.15 { @ Please turn on 'MIX' option if more than one geometry (Stagger,Tri-tier) are used. 
  COPY CHIP
}
#ENDIF
#IFDEF PITCH_80_STAGGER
PITCH_OPTION.ERROR.16 { @ Please turn on 'MIX' option if more than one geometry (Stagger,Tri-tier) are used. 
  COPY CHIP
}
#ENDIF
#ENDIF
#ENDIF


#IFNDEF PITCH_60_STAGGER
#IFNDEF PITCH_70_STAGGER 
#IFNDEF PITCH_80_STAGGER 
#IFNDEF PITCH_80_TRITIER
#IFDEF MIX
PITCH_OPTION.ERROR.17 { @ Please turn off 'MIX' option if only one geometry (Single in line) is used.
COPY CHIP
}

#ENDIF
#ENDIF
#ENDIF
#ENDIF
#ENDIF


#IFNDEF PITCH_50_SINGLE
#IFNDEF PITCH_55_SINGLE 
#IFNDEF PITCH_80_TRITIER
#IFDEF MIX
PITCH_OPTION.ERROR.18 { @ Please turn off 'MIX' option if only one geometry (Stagger) is used.
COPY CHIP
}

#ENDIF
#ENDIF
#ENDIF
#ENDIF


#IFNDEF PITCH_50_SINGLE
#IFNDEF PITCH_55_SINGLE
#IFNDEF PITCH_60_STAGGER
#IFNDEF PITCH_70_STAGGER 
#IFNDEF PITCH_80_STAGGER 
#IFDEF MIX
PITCH_OPTION.ERROR.19 { @ Please turn off 'MIX' option if only one geometry (Tritier) is used.
COPY CHIP
}

#ENDIF
#ENDIF
#ENDIF
#ENDIF
#ENDIF
#ENDIF    



// Pad Pitch Rule
//===============

// Single in-line
//---------------
#IFDEF PITCH_50_SINGLE
CB.W.1.P50.SI { @ CB width >= 43um
  INT CB_SINGLE < 43 ABUT < 90 SINGULAR REGION
}
CB.W.2.P50.SI { @ CB length (the edge perpendicular to nearby chip edge) >= 80um
  NOT ENCLOSE RECTANGLE CB_SINGLE 0.001 79.999 ORTHOGONAL ONLY
}
CB.S.1.P50.SI { @ CB space >= 7um
  EXT CB_SINGLE  < 7 ABUT < 90 SINGULAR REGION
}
CB.R.1 { @ For 50um <= pad pitch < 55um, one pair of notches on each pad CB is required. Notch size = 1.5umx3.0um.
  VERTEX CB_SINGLE_a != 12
  CB_SINGLE_a TOUCH notch_CB < 2
  CB_SINGLE_a NOT TOUCH notch_CB 
  NOT RECTANGLE notch_CB == 1.5 BY == 3.0 ORTHOGONAL ONLY
}

//CBWB.R.1 is un-checkable rule .
#IFNDEF TRL_DFS
#IFNDEF OBV_DFS
CB.EN.1.M1.P50.SI { @ CB enclosure by M1 pad regions >= 2um
  ENC CB_SINGLE_NON_CUP M1 < 2 ABUT < 90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M1
}
CB.EN.1.M2.P50.SI { @ CB enclosure by M2 pad regions >= 2um
  ENC CB_SINGLE_NON_CUP M2 < 2 ABUT < 90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M2
}
CB.EN.1.M3.P50.SI { @ CB enclosure by M3 pad regions >= 2um
  ENC CB_SINGLE_NON_CUP M3 < 2 ABUT < 90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M3
}
CB.EN.1.M4.P50.SI { @ CB enclosure by M4 pad regions >= 2um
  ENC CB_SINGLE_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M4
}
CB.EN.1.M5.P50.SI { @ CB enclosure by M5 pad regions >= 2um
  ENC CB_SINGLE_NON_CUP M5 < 2 ABUT < 90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M5
}
CB.EN.1.M6.P50.SI { @ CB enclosure by M6 pad regions >= 2um
  ENC CB_SINGLE_NON_CUP M6 < 2 ABUT < 90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M6
}
#ENDIF
#ENDIF
#IFDEF TRL_DFS
DFSCB.EN.2.M1.P50.SI { @ CB enclosure by M1 pad regions >= 2um
  ENC CB_SINGLE_NON_CUP M1 < 2 ABUT < 90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M1
}
DFSCB.EN.2.M2.P50.SI { @ CB enclosure by M2 pad regions >= 2um
  ENC CB_SINGLE_NON_CUP M2 < 2 ABUT < 90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M2
}
DFSCB.EN.2.M3.P50.SI { @ CB enclosure by M3 pad regions >= 2um
  ENC CB_SINGLE_NON_CUP M3 < 2 ABUT < 90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M3
}
DFSCB.EN.2.M4.P50.SI { @ CB enclosure by M4 pad regions >= 2um
  ENC CB_SINGLE_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M4
}
#ENDIF
#IFDEF OBV_DFS
DFSCB.EN.4.M1.P50.SI { @ CB enclosure by M1 pad regions >= 2um
  ENC CB_SINGLE_NON_CUP M1 < 2 ABUT < 90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M1
}
DFSCB.EN.4.M2.P50.SI { @ CB enclosure by M2 pad regions >= 2um
  ENC CB_SINGLE_NON_CUP M2 < 2 ABUT < 90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M2
}
DFSCB.EN.4.M3.P50.SI { @ CB enclosure by M3 pad regions >= 2um
  ENC CB_SINGLE_NON_CUP M3 < 2 ABUT < 90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M3
}
DFSCB.EN.4.M4.P50.SI { @ CB enclosure by M4 pad regions >= 2um
  ENC CB_SINGLE_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M4
}
#ENDIF

#ELSE
#IFDEF PITCH_55_SINGLE
CB.W.1.P55.SI { @ CB width >= 48um
  INT CB_SINGLE < 48 ABUT < 90 SINGULAR REGION
}
CB.W.2.P55.SI { @ CB length (the edge perpendicular to nearby chip edge) >= 66um
  NOT ENCLOSE RECTANGLE CB_SINGLE 0.001 65.999 ORTHOGONAL ONLY
}
CB.S.1.P55.SI { @ CB space >= 7um
  EXT CB_SINGLE  < 7 ABUT < 90 SINGULAR REGION
}
#IFNDEF TRL_DFS
#IFNDEF OBV_DFS
CB.EN.1.M1.P55.SI { @ CB enclosure by M1 pad regions >= 2um
  ENC CB_SINGLE_NON_CUP M1 < 2 ABUT < 90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M1
}
CB.EN.1.M2.P55.SI { @ CB enclosure by M2 pad regions >= 2um
  ENC CB_SINGLE_NON_CUP M2 < 2 ABUT < 90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M2
}
CB.EN.1.M3.P55.SI { @ CB enclosure by M3 pad regions >= 2um
  ENC CB_SINGLE_NON_CUP M3 < 2 ABUT < 90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M3
}
CB.EN.1.M4.P55.SI { @ CB enclosure by M4 pad regions >= 2um
  ENC CB_SINGLE_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M4
}
CB.EN.1.M5.P55.SI { @ CB enclosure by M5 pad regions >= 2um
  ENC CB_SINGLE_NON_CUP M5 < 2 ABUT < 90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M5
}
CB.EN.1.M6.P55.SI { @ CB enclosure by M6 pad regions >= 2um
  ENC CB_SINGLE_NON_CUP M6 < 2 ABUT < 90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M6
}
#ENDIF
#ENDIF
#IFDEF TRL_DFS
DFSCB.EN.2.M1.P55.SI { @ CB enclosure by M1 pad regions >= 2um
  ENC CB_SINGLE_NON_CUP M1 < 2 ABUT < 90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M1
}
DFSCB.EN.2.M2.P55.SI { @ CB enclosure by M2 pad regions >= 2um
  ENC CB_SINGLE_NON_CUP M2 < 2 ABUT < 90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M2
}
DFSCB.EN.2.M3.P55.SI { @ CB enclosure by M3 pad regions >= 2um
  ENC CB_SINGLE_NON_CUP M3 < 2 ABUT < 90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M3
}
DFSCB.EN.2.M4.P55.SI { @ CB enclosure by M4 pad regions >= 2um
  ENC CB_SINGLE_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M4
}
#ENDIF
#IFDEF OBV_DFS
DFSCB.EN.4.M1.P55.SI { @ CB enclosure by M1 pad regions >= 2um
  ENC CB_SINGLE_NON_CUP M1 < 2 ABUT < 90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M1
}
DFSCB.EN.4.M2.P55.SI { @ CB enclosure by M2 pad regions >= 2um
  ENC CB_SINGLE_NON_CUP M2 < 2 ABUT < 90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M2
}
DFSCB.EN.4.M3.P55.SI { @ CB enclosure by M3 pad regions >= 2um
  ENC CB_SINGLE_NON_CUP M3 < 2 ABUT < 90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M3
}
DFSCB.EN.4.M4.P55.SI { @ CB enclosure by M4 pad regions >= 2um
  ENC CB_SINGLE_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M4
}
#ENDIF
#ENDIF
#ENDIF

// Staggered
//----------
#IFDEF PITCH_60_STAGGER
CB.W.1.P60.ST { @ CB width >= 53um     //rule value is changed
  INT CB_STAGGER < 53 ABUT < 90 SINGULAR REGION
}
CB.W.2.P60.ST { @ CB length (the edge perpendicular to nearby chip edge) >= 66um
  NOT ENCLOSE RECTANGLE CB_STAGGER 0.001 65.999 ORTHOGONAL ONLY
}

CB.W.3_M1.P60.ST { @ Width of pad metal under CB region. M1,M2~Mtop-3 under inner pad >= 20um
  X = PADM1_ST INTERACT INNER_CB_ST_NON_CUP
  INT X < 20 ABUT < 90 SINGULAR REGION
}

CB.W.3_M2.P60.ST { @ Width of pad metal under CB region. M1,M2~Mtop-3 under inner pad >= 20um
  X = PADM2_ST INTERACT INNER_CB_ST_NON_CUP
  INT X < 20 ABUT < 90 SINGULAR REGION
}

CB.W.3_M3.P60.ST { @ Width of pad metal under CB region. M1,M2~Mtop-3 under inner pad >= 20um
  X = PADM3_ST INTERACT INNER_CB_ST_NON_CUP
  INT X < 20 ABUT < 90 SINGULAR REGION
}



CB.S.1.P60.ST { @ CB space >= 7 um // Rule Value change from 10 to 7 um
  EXT CB_STAGGER < 7 ABUT < 90 SINGULAR REGION
}

#IFNDEF TRL_DFS
#IFNDEF OBV_DFS
CB.EN.1.M1.ST { @ CB enclosure by M1 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M1 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M1
}
CB.EN.1.M2.ST { @ CB enclosure by M2 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M2 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M2
}
CB.EN.1.M3.ST { @ CB enclosure by M3 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M3 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M3
}
CB.EN.1.M4.ST { @ CB enclosure by M4 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M4
  ENC INNER_CB_ST_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  INNER_CB_ST_NON_CUP OUTSIDE EDGE M4
}
CB.EN.1.M5.ST { @ CB enclosure by M5 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M5 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M5
  ENC INNER_CB_ST_NON_CUP M5 < 2 ABUT < 90 SINGULAR REGION
  INNER_CB_ST_NON_CUP OUTSIDE EDGE M5
}
CB.EN.1.M6.ST { @ CB enclosure by M6 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M6 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M6
  ENC INNER_CB_ST_NON_CUP M6 < 2 ABUT < 90 SINGULAR REGION
  INNER_CB_ST_NON_CUP OUTSIDE EDGE M6
}
#ENDIF
#ENDIF
#IFDEF TRL_DFS
DFSCB.EN.2.M1.ST { @ CB enclosure by M1 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M1 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M1
}
DFSCB.EN.2.M2.ST { @ CB enclosure by M2 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M2 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M2
}
DFSCB.EN.2.M3.ST { @ CB enclosure by M3 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M3 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M3
}
DFSCB.EN.2.M4.ST { @ CB enclosure by M4 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M4
  ENC INNER_CB_ST_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  INNER_CB_ST_NON_CUP OUTSIDE EDGE M4
}
#ENDIF
#IFDEF OBV_DFS
DFSCB.EN.4.M1.ST { @ CB enclosure by M1 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M1 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M1
}
DFSCB.EN.4.M2.ST { @ CB enclosure by M2 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M2 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M2
}
DFSCB.EN.4.M3.ST { @ CB enclosure by M3 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M3 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M3
}
DFSCB.EN.4.M4.ST { @ CB enclosure by M4 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M4
  ENC INNER_CB_ST_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  INNER_CB_ST_NON_CUP OUTSIDE EDGE M4
}
#ENDIF



#ELSE
#IFDEF PITCH_70_STAGGER
CB.W.1.P70.ST { @ CB width >= 58um
  INT CB_STAGGER < 58 ABUT < 90 SINGULAR REGION
}
CB.W.2.P70.ST { @ CB length (the edge perpendicular to nearby chip edge) >= 72um
  NOT ENCLOSE RECTANGLE CB_STAGGER 0.001 71.999 ORTHOGONAL ONLY
}
CB.W.3_M1.P70.ST { @ Width of pad metal under CB region. M1,M2~Mtop-3 under inner pad >= 45um
  X = PADM1_ST INTERACT INNER_CB_ST_NON_CUP
  INT X < 45 ABUT < 90 SINGULAR REGION
}

CB.W.3_M2.P70.ST { @ Width of pad metal under CB region. M1,M2~Mtop-3 under inner pad >= 45um
  X = PADM2_ST INTERACT INNER_CB_ST_NON_CUP
  INT X < 45 ABUT < 90 SINGULAR REGION
}

CB.W.3_M3.P70.ST { @ Width of pad metal under CB region. M1,M2~Mtop-3 under inner pad >= 45um
  X = PADM3_ST INTERACT INNER_CB_ST_NON_CUP
  INT X < 45 ABUT < 90 SINGULAR REGION
}



CB.S.1.P70.ST { @ CB space >= 12um
  EXT CB_STAGGER < 12 ABUT < 90 SINGULAR REGION
}

#IFNDEF TRL_DFS
#IFNDEF OBV_DFS
CB.EN.1.M1.ST { @ CB enclosure by M1 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M1 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M1
}
CB.EN.1.M2.ST { @ CB enclosure by M2 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M2 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M2
}
CB.EN.1.M3.ST { @ CB enclosure by M3 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M3 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M3
}
CB.EN.1.M4.ST { @ CB enclosure by M4 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M4
  ENC INNER_CB_ST_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  INNER_CB_ST_NON_CUP OUTSIDE EDGE M4
}
CB.EN.1.M5.ST { @ CB enclosure by M5 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M5 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M5
  ENC INNER_CB_ST_NON_CUP M5 < 2 ABUT < 90 SINGULAR REGION
  INNER_CB_ST_NON_CUP OUTSIDE EDGE M5
}
CB.EN.1.M6.ST { @ CB enclosure by M6 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M6 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M6
  ENC INNER_CB_ST_NON_CUP M6 < 2 ABUT < 90 SINGULAR REGION
  INNER_CB_ST_NON_CUP OUTSIDE EDGE M6
}
#ENDIF
#ENDIF
#IFDEF TRL_DFS
DFSCB.EN.2.M1.ST { @ CB enclosure by M1 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M1 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M1
}
DFSCB.EN.2.M2.ST { @ CB enclosure by M2 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M2 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M2
}
DFSCB.EN.2.M3.ST { @ CB enclosure by M3 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M3 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M3
}
DFSCB.EN.2.M4.ST { @ CB enclosure by M4 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M4
  ENC INNER_CB_ST_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  INNER_CB_ST_NON_CUP OUTSIDE EDGE M4
}
#ENDIF
#IFDEF OBV_DFS
DFSCB.EN.4.M1.ST { @ CB enclosure by M1 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M1 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M1
}
DFSCB.EN.4.M2.ST { @ CB enclosure by M2 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M2 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M2
}
DFSCB.EN.4.M3.ST { @ CB enclosure by M3 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M3 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M3
}
DFSCB.EN.4.M4.ST { @ CB enclosure by M4 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M4
  ENC INNER_CB_ST_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  INNER_CB_ST_NON_CUP OUTSIDE EDGE M4
}
#ENDIF
#ELSE
#IFDEF PITCH_80_STAGGER
CB.W.1.P80.ST { @ CB width >= 65um
  INT CB_STAGGER < 65 ABUT < 90 SINGULAR REGION
}
CB.W.2.P80.ST { @ CB length (the edge perpendicular to nearby chip edge) >= 75um
  NOT ENCLOSE RECTANGLE CB_STAGGER 0.001 74.999 ORTHOGONAL ONLY
}
CB.W.3.M1.P80.ST { @ Width of pad metal under CB region. M1,M2~Mtop-3 under inner pad >= 50um
  X = PADM1_ST INTERACT INNER_CB_ST_NON_CUP
  INT X < 50 ABUT < 90 SINGULAR REGION
}

CB.W.3.M2.P80.ST { @ Width of pad metal under CB region. M1,M2~Mtop-3 under inner pad >= 50um
  X = PADM2_ST INTERACT INNER_CB_ST_NON_CUP
  INT X < 50 ABUT < 90 SINGULAR REGION
}

CB.W.3.M3.P80.ST { @ Width of pad metal under CB region. M1,M2~Mtop-3 under inner pad >= 50um
  X = PADM3_ST INTERACT INNER_CB_ST_NON_CUP
  INT X < 50 ABUT < 90 SINGULAR REGION
}



CB.S.1.P80.ST { @ CB space >= 15um
  EXT CB_STAGGER < 15 ABUT < 90 SINGULAR REGION
}
#IFNDEF TRL_DFS
#IFNDEF OBV_DFS
CB.EN.1.M1.ST { @ CB enclosure by M1 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M1 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M1
}
CB.EN.1.M2.ST { @ CB enclosure by M2 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M2 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M2
}
CB.EN.1.M3.ST { @ CB enclosure by M3 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M3 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M3
}
CB.EN.1.M4.ST { @ CB enclosure by M4 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M4
  ENC INNER_CB_ST_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  INNER_CB_ST_NON_CUP OUTSIDE EDGE M4
}
CB.EN.1.M5.ST { @ CB enclosure by M5 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M5 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M5
  ENC INNER_CB_ST_NON_CUP M5 < 2 ABUT < 90 SINGULAR REGION
  INNER_CB_ST_NON_CUP OUTSIDE EDGE M5
}
CB.EN.1.M6.ST { @ CB enclosure by M6 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M6 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M6
  ENC INNER_CB_ST_NON_CUP M6 < 2 ABUT < 90 SINGULAR REGION
  INNER_CB_ST_NON_CUP OUTSIDE EDGE M6
}
#ENDIF
#ENDIF
#IFDEF TRL_DFS
DFSCB.EN.2.M1.ST { @ CB enclosure by M1 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M1 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M1
}
DFSCB.EN.2.M2.ST { @ CB enclosure by M2 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M2 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M2
}
DFSCB.EN.2.M3.ST { @ CB enclosure by M3 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M3 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M3
}
DFSCB.EN.2.M4.ST { @ CB enclosure by M4 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M4
  ENC INNER_CB_ST_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  INNER_CB_ST_NON_CUP OUTSIDE EDGE M4
}
#ENDIF
#IFDEF OBV_DFS
DFSCB.EN.4.M1.ST { @ CB enclosure by M1 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M1 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M1
}
DFSCB.EN.4.M2.ST { @ CB enclosure by M2 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M2 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M2
}
DFSCB.EN.4.M3.ST { @ CB enclosure by M3 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M3 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M3
}
DFSCB.EN.4.M4.ST { @ CB enclosure by M4 pad regions >= 2um
  ENC OUTER_CB_ST_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M4
  ENC INNER_CB_ST_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  INNER_CB_ST_NON_CUP OUTSIDE EDGE M4
}
#ENDIF

#ENDIF
#ENDIF
#ENDIF

// Tri-Tier
//---------
#IFDEF PITCH_80_TRITIER
CB.W.1.P80.TR { @ CB width >= 65um
  INT CB_TRI_TIER < 65 ABUT < 90 SINGULAR REGION
}
CB.W.2.P80.TR { @ CB length (the edge perpendicular to nearby chip edge) >= 75um
  NOT ENCLOSE RECTANGLE CB_TRI_TIER 0.001 74.999 ORTHOGONAL ONLY
}
CB.S.1.P80.TR { @ CB space >= 15um
  EXT CB_TRI_TIER < 15 ABUT < 90 SINGULAR REGION
}
CB.W.3a.M1.TR { @ Width of pad metal under CB region. M1,M2,~Mtop-3 under middle pad >= 50um
  X = PADM1_TR NOT OUTSIDE MID_CB_TR_NON_CUP
  INT X < 50 ABUT < 90 SINGULAR REGION
}

CB.W.3a.M2.TR { @ Width of pad metal under CB region. M1,M2,~Mtop-3 under middle pad >= 50um
  X = PADM2_TR NOT OUTSIDE MID_CB_TR_NON_CUP
  INT X < 50 ABUT < 90 SINGULAR REGION
}

CB.W.3a.M3.TR { @ Width of pad metal under CB region. M1,M2,~Mtop-3 under middle pad >= 50um
  X = PADM3_TR NOT OUTSIDE MID_CB_TR_NON_CUP
  INT X < 50 ABUT < 90 SINGULAR REGION
}



CB.W.3b.M2.TR { @ Width of pad metal under CB region. M2~Mtop-3 under inner pad >= 50um
  X = PADM2_TR NOT OUTSIDE INNER_CB_TR_NON_CUP
  INT X < 50 ABUT <90 SINGULAR REGION
}

CB.W.3b.M3.TR { @ Width of pad metal under CB region. M2~Mtop-3 under inner pad >= 50um
  X = PADM3_TR NOT OUTSIDE INNER_CB_TR_NON_CUP
  INT X < 50 ABUT <90 SINGULAR REGION
}



#IFNDEF TRL_DFS
#IFNDEF OBV_DFS
CB.EN.1.M1.TR { @ CB enclosure by M1 pad regions >= 2um
  ENC OUTER_CB_TR_NON_CUP M1 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_TR_NON_CUP OUTSIDE EDGE M1
}
CB.EN.1.M2.TR { @ CB enclosure by M2 pad regions >= 2um
  ENC OUTER_CB_TR_NON_CUP M2 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_TR_NON_CUP OUTSIDE EDGE M2
}
CB.EN.1.M3.TR { @ CB enclosure by M3 pad regions >= 2um
  ENC OUTER_CB_TR_NON_CUP M3 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_TR_NON_CUP OUTSIDE EDGE M3
}
CB.EN.1.M4.TR { @ CB enclosure by M4 pad regions >= 2um
  ENC OUTER_CB_TR_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_TR_NON_CUP OUTSIDE EDGE M4
  ENC MID_CB_TR_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  MID_CB_TR_NON_CUP OUTSIDE EDGE M4
  ENC INNER_CB_TR_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  INNER_CB_TR_NON_CUP OUTSIDE EDGE M4
}
CB.EN.1.M5.TR { @ CB enclosure by M5 pad regions >= 2um
  ENC OUTER_CB_TR_NON_CUP M5 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_TR_NON_CUP OUTSIDE EDGE M5
  ENC MID_CB_TR_NON_CUP M5 < 2 ABUT < 90 SINGULAR REGION
  MID_CB_TR_NON_CUP OUTSIDE EDGE M5
  ENC INNER_CB_TR_NON_CUP M5 < 2 ABUT < 90 SINGULAR REGION
  INNER_CB_TR_NON_CUP OUTSIDE EDGE M5
}
CB.EN.1.M6.TR { @ CB enclosure by M6 pad regions >= 2um
  ENC OUTER_CB_TR_NON_CUP M6 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_TR_NON_CUP OUTSIDE EDGE M6
  ENC MID_CB_TR_NON_CUP M6 < 2 ABUT < 90 SINGULAR REGION
  MID_CB_TR_NON_CUP OUTSIDE EDGE M6
  ENC INNER_CB_TR_NON_CUP M6 < 2 ABUT < 90 SINGULAR REGION
  INNER_CB_TR_NON_CUP OUTSIDE EDGE M6
}
#ENDIF
#ENDIF
#IFDEF TRL_DFS
DFSCB.EN.2.M1.TR { @ CB enclosure by M1 pad regions >= 2um
  ENC OUTER_CB_TR_NON_CUP M1 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_TR_NON_CUP OUTSIDE EDGE M1
}
DFSCB.EN.2.M2.TR { @ CB enclosure by M2 pad regions >= 2um
  ENC OUTER_CB_TR_NON_CUP M2 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_TR_NON_CUP OUTSIDE EDGE M2
}
DFSCB.EN.2.M3.TR { @ CB enclosure by M3 pad regions >= 2um
  ENC OUTER_CB_TR_NON_CUP M3 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_TR_NON_CUP OUTSIDE EDGE M3
}
DFSCB.EN.2.M4.TR { @ CB enclosure by M4 pad regions >= 2um
  ENC OUTER_CB_TR_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_TR_NON_CUP OUTSIDE EDGE M4
  ENC MID_CB_TR_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  MID_CB_TR_NON_CUP OUTSIDE EDGE M4
  ENC INNER_CB_TR_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  INNER_CB_TR_NON_CUP OUTSIDE EDGE M4
}
#ENDIF
#ENDIF
#IFDEF OBV_DFS
DFSCB.EN.4.M1.TR { @ CB enclosure by M1 pad regions >= 2um
  ENC OUTER_CB_TR_NON_CUP M1 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_TR_NON_CUP OUTSIDE EDGE M1
}
DFSCB.EN.4.M2.TR { @ CB enclosure by M2 pad regions >= 2um
  ENC OUTER_CB_TR_NON_CUP M2 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_TR_NON_CUP OUTSIDE EDGE M2
}
DFSCB.EN.4.M3.TR { @ CB enclosure by M3 pad regions >= 2um
  ENC OUTER_CB_TR_NON_CUP M3 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_TR_NON_CUP OUTSIDE EDGE M3
}
DFSCB.EN.4.M4.TR { @ CB enclosure by M4 pad regions >= 2um
  ENC OUTER_CB_TR_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  OUTER_CB_TR_NON_CUP OUTSIDE EDGE M4
  ENC MID_CB_TR_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  MID_CB_TR_NON_CUP OUTSIDE EDGE M4
  ENC INNER_CB_TR_NON_CUP M4 < 2 ABUT < 90 SINGULAR REGION
  INNER_CB_TR_NON_CUP OUTSIDE EDGE M4
}
#ENDIF

CB.S.2.M1 { @ Space of 2 pad metals, or between pad metal and metal >= 2.5um
#IFDEF PITCH_50_SINGLE
  EXT PADM1_SI M1_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_55_SINGLE
  EXT PADM1_SI M1_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION
#ENDIF
#ENDIF
  
#IFDEF PITCH_60_STAGGER
  EXT PADM1_ST M1_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_70_STAGGER
  EXT PADM1_ST M1_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_80_STAGGER
  EXT PADM1_ST M1_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION
#ENDIF
#ENDIF 
#ENDIF
  EXT PADM1_TR M1_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION      
}
CB.S.2.M2 { @ Space of 2 pad metals, or between pad metal and metal >= 2.5um
#IFDEF PITCH_50_SINGLE
  EXT PADM2_SI M2_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_55_SINGLE
  EXT PADM2_SI M2_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION
#ENDIF
#ENDIF
  
#IFDEF PITCH_60_STAGGER
  EXT PADM2_ST M2_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_70_STAGGER
  EXT PADM2_ST M2_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_80_STAGGER
  EXT PADM2_ST M2_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION
#ENDIF
#ENDIF 
#ENDIF
  EXT PADM2_TR M2_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION      
}
CB.S.2.M3 { @ Space of 2 pad metals, or between pad metal and metal >= 2.5um
#IFDEF PITCH_50_SINGLE
  EXT PADM3_SI M3_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_55_SINGLE
  EXT PADM3_SI M3_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION
#ENDIF
#ENDIF
  
#IFDEF PITCH_60_STAGGER
  EXT PADM3_ST M3_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_70_STAGGER
  EXT PADM3_ST M3_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_80_STAGGER
  EXT PADM3_ST M3_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION
#ENDIF
#ENDIF 
#ENDIF
  EXT PADM3_TR M3_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION      
}
CB.S.2.M4 { @ Space of 2 pad metals, or between pad metal and metal >= 2.5um
#IFDEF PITCH_50_SINGLE
  EXT PADM4_SI M4_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_55_SINGLE
  EXT PADM4_SI M4_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION
#ENDIF
#ENDIF
  
#IFDEF PITCH_60_STAGGER
  EXT PADM4_ST M4_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_70_STAGGER
  EXT PADM4_ST M4_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_80_STAGGER
  EXT PADM4_ST M4_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION
#ENDIF
#ENDIF 
#ENDIF
  EXT PADM4_TR M4_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION      
}
CB.S.2.M5 { @ Space of 2 pad metals, or between pad metal and metal >= 2.5um
#IFDEF PITCH_50_SINGLE
  EXT PADM5_SI M5_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_55_SINGLE
  EXT PADM5_SI M5_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION
#ENDIF
#ENDIF
  
#IFDEF PITCH_60_STAGGER
  EXT PADM5_ST M5_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_70_STAGGER
  EXT PADM5_ST M5_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_80_STAGGER
  EXT PADM5_ST M5_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION
#ENDIF
#ENDIF 
#ENDIF
  EXT PADM5_TR M5_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION      
}
CB.S.2.M6 { @ Space of 2 pad metals, or between pad metal and metal >= 2.5um
#IFDEF PITCH_50_SINGLE
  EXT PADM6_SI M6_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_55_SINGLE
  EXT PADM6_SI M6_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION
#ENDIF
#ENDIF
  
#IFDEF PITCH_60_STAGGER
  EXT PADM6_ST M6_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_70_STAGGER
  EXT PADM6_ST M6_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_80_STAGGER
  EXT PADM6_ST M6_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION
#ENDIF
#ENDIF 
#ENDIF
  EXT PADM6_TR M6_NODMY < 2.5 ABUT >0 <90 SINGULAR REGION      
}


CB.S.3 { @ Space of different pad geometries (CB) [(Single to Stagger), (Single to Tri-tier) or (Stagger to Tri-tier)] >= 15um
  EXT CB_SINGLE CB_STAGGER < 15 ABUT <90 OPPOSITE SINGULAR REGION
  EXT CB_STAGGER CB_TRI_TIER < 15 ABUT <90 OPPOSITE SINGULAR REGION
  EXT CB_TRI_TIER CB_SINGLE  < 15 ABUT  <90 OPPOSITE SINGULAR REGION
}

//CB.P.1 can't be checked by DRC.
//CB.P.2 can't be checked by DRC.
//CB.P.3 can't be checked by DRC.
//CB.P.4 can't be checked by DRC.

// Polyimide Window Rule
//======================
PM_CB   = PM INTERACT CB	 	
PM_NOT_CB = ((PM NOT INTERACT CB) NOT INTERACT UBM) NOT INTERACT SR_EDGE
PM.W.1 { @ PM width (Interact with CB region) >= 86um
  INT PM_CB < 86 ABUT <90 SINGULAR REGION
}
PM.W.2 { @ PM width (Not interact with CB region) >= 30um
  INT PM_NOT_CB < 30 ABUT <90 SINGULAR REGION
}

PM.S.1 { @ Space or Space to chip edge >= 15 um
   EXT PM < 15 ABUT < 90 SINGULAR REGION
   ENC PM CHIP_EDGE < 15 ABUT >0 < 90 SINGULAR REGION
}

PM.EN.1 {@ PM enclosure of CB >= 5um
  ENC CB PM_CB < 5 ABUT <90 SINGULAR REGION
}
CHIP_PM = CHIP INTERACT PM
PM.R.3 { @ Polyimide is not allowed over seal ring area, LMARK, FW
  (SR_EDGE NOT PM) INTERACT CHIP_PM
  (LMARK NOT PM) INTERACT CHIP_PM
  (FW NOT PM) INTERACT CHIP_PM
}
//PM.R.1 can't be checked by DRC.
//PM.R.2 can't be checked by DRC.
// Al Pad Structure Rule for NON-CUP
//==================================
#IFDEF PITCH_50_SINGLE
CB.R.2a.SI { @ Pad structure must be at least MT/VIAT/Mtop-1...VIA1/M1. 
			 @ CUP structure without WBDMY is not allowed.Please make sure you draw WBDMY and turn on the right switch.
  CB_SINGLE_NON_CUP NOT INTERACT PADM1_SI
  CB_SINGLE_NON_CUP NOT INTERACT PADM2_SI
  CB_SINGLE_NON_CUP NOT INTERACT PADM3_SI
  CB_SINGLE_NON_CUP NOT INTERACT PADM4_SI
  CB_SINGLE_NON_CUP NOT INTERACT PADM5_SI
  CB_SINGLE_NON_CUP NOT INTERACT PADM6_SI
  CB_SINGLE_NON_CUP NOT ENCLOSE VIA1
  CB_SINGLE_NON_CUP NOT ENCLOSE VIA2
  CB_SINGLE_NON_CUP NOT ENCLOSE VIA3
  CB_SINGLE_NON_CUP NOT ENCLOSE VIA4
  CB_SINGLE_NON_CUP NOT ENCLOSE VIA5
}
CB.R.3.SI { @ Metal pad region draw slot is not allowed.
  HOLES M1CB_SI_NON_CUP
  HOLES M2CB_SI_NON_CUP
  HOLES M3CB_SI_NON_CUP
  HOLES M4CB_SI_NON_CUP
  HOLES M5CB_SI_NON_CUP
  HOLES M6CB_SI_NON_CUP
}
#ELSE
#IFDEF PITCH_55_SINGLE
CB.R.2a.SI { @ Pad structure must be at least MT/VIAT/Mtop-1...VIA1/M1.
			 @ CUP structure without WBDMY is not allowed.please make sure you draw WBDMY and turn on the right switch.
  CB_SINGLE_NON_CUP NOT INTERACT PADM1_SI
  CB_SINGLE_NON_CUP NOT INTERACT PADM2_SI
  CB_SINGLE_NON_CUP NOT INTERACT PADM3_SI
  CB_SINGLE_NON_CUP NOT INTERACT PADM4_SI
  CB_SINGLE_NON_CUP NOT INTERACT PADM5_SI
  CB_SINGLE_NON_CUP NOT INTERACT PADM6_SI
  CB_SINGLE_NON_CUP NOT ENCLOSE VIA1
  CB_SINGLE_NON_CUP NOT ENCLOSE VIA2
  CB_SINGLE_NON_CUP NOT ENCLOSE VIA3
  CB_SINGLE_NON_CUP NOT ENCLOSE VIA4
  CB_SINGLE_NON_CUP NOT ENCLOSE VIA5
}
CB.R.3.SI { @ Metal pad region draw slot is not allowed.
  HOLES M1CB_SI_NON_CUP
  HOLES M2CB_SI_NON_CUP
  HOLES M3CB_SI_NON_CUP
  HOLES M4CB_SI_NON_CUP
  HOLES M5CB_SI_NON_CUP
  HOLES M6CB_SI_NON_CUP
}
#ENDIF
#ENDIF

#IFDEF PITCH_60_STAGGER
CB.R.2a.ST { @ Pad structure must be at least MT/VIAT/Mtop-1...VIA1/M1.
			 @ CUP structure without WBDMY is not allowed, please make sure you draw WBDMY and turn on the right switch.
  CB_STAGGER_NON_CUP NOT INTERACT PADM1_ST
  CB_STAGGER_NON_CUP NOT INTERACT PADM2_ST
  CB_STAGGER_NON_CUP NOT INTERACT PADM3_ST
  CB_STAGGER_NON_CUP NOT INTERACT PADM4_ST
  CB_STAGGER_NON_CUP NOT INTERACT PADM5_ST
  CB_STAGGER_NON_CUP NOT INTERACT PADM6_ST
  CB_STAGGER_NON_CUP NOT ENCLOSE VIA1
  CB_STAGGER_NON_CUP NOT ENCLOSE VIA2
  CB_STAGGER_NON_CUP NOT ENCLOSE VIA3
  CB_STAGGER_NON_CUP NOT ENCLOSE VIA4
  CB_STAGGER_NON_CUP NOT ENCLOSE VIA5
}
CB.R.3.ST { @ Slots in metal pad region are not allowed.
  HOLES M1CB_ST_NON_CUP
  HOLES M2CB_ST_NON_CUP
  HOLES M3CB_ST_NON_CUP
  HOLES M4CB_ST_NON_CUP
  HOLES M5CB_ST_NON_CUP
  HOLES M6CB_ST_NON_CUP
}
#ELSE
#IFDEF PITCH_70_STAGGER
CB.R.2a.ST { @ Pad structure must be at least MT/VIAT/Mtop-1...VIA1/M1.
			 @ .CUP structure without WBDMY is not allowed ,  please make sure you draw WBDMY and turn on the right switch.
  CB_STAGGER_NON_CUP NOT INTERACT PADM1_ST
  CB_STAGGER_NON_CUP NOT INTERACT PADM2_ST
  CB_STAGGER_NON_CUP NOT INTERACT PADM3_ST
  CB_STAGGER_NON_CUP NOT INTERACT PADM4_ST
  CB_STAGGER_NON_CUP NOT INTERACT PADM5_ST
  CB_STAGGER_NON_CUP NOT INTERACT PADM6_ST
  CB_STAGGER_NON_CUP NOT ENCLOSE VIA1
  CB_STAGGER_NON_CUP NOT ENCLOSE VIA2
  CB_STAGGER_NON_CUP NOT ENCLOSE VIA3
  CB_STAGGER_NON_CUP NOT ENCLOSE VIA4
  CB_STAGGER_NON_CUP NOT ENCLOSE VIA5
}
CB.R.3.ST { @ Slots in metal pad region are not allowed.
  HOLES M1CB_ST_NON_CUP
  HOLES M2CB_ST_NON_CUP
  HOLES M3CB_ST_NON_CUP
  HOLES M4CB_ST_NON_CUP
  HOLES M5CB_ST_NON_CUP
  HOLES M6CB_ST_NON_CUP
}
#ELSE
#IFDEF PITCH_80_STAGGER
CB.R.2a.ST { @ Pad structure must be at least MT/VIAT/Mtop-1...VIA1/M1.
			 @ CUP structure without WBDMY is not allowed , please make sure you draw WBDMY and turn on the right switch.
  CB_STAGGER_NON_CUP NOT INTERACT PADM1_ST
  CB_STAGGER_NON_CUP NOT INTERACT PADM2_ST
  CB_STAGGER_NON_CUP NOT INTERACT PADM3_ST
  CB_STAGGER_NON_CUP NOT INTERACT PADM4_ST
  CB_STAGGER_NON_CUP NOT INTERACT PADM5_ST
  CB_STAGGER_NON_CUP NOT INTERACT PADM6_ST
  CB_STAGGER_NON_CUP NOT ENCLOSE VIA1
  CB_STAGGER_NON_CUP NOT ENCLOSE VIA2
  CB_STAGGER_NON_CUP NOT ENCLOSE VIA3
  CB_STAGGER_NON_CUP NOT ENCLOSE VIA4
  CB_STAGGER_NON_CUP NOT ENCLOSE VIA5
}
CB.R.3.ST { @ Slots in metal pad region are not allowed.
  HOLES M1CB_ST_NON_CUP
  HOLES M2CB_ST_NON_CUP
  HOLES M3CB_ST_NON_CUP
  HOLES M4CB_ST_NON_CUP
  HOLES M5CB_ST_NON_CUP
  HOLES M6CB_ST_NON_CUP
}
#ENDIF
#ENDIF
#ENDIF

CB.R.2a.TR { @ Pad structure must be at least MT/VIAT/Mtop-1...VIA1/M1.(Exception: inner pad of Tri-Tier structure can be MT..VIA2/M2. M1 routing under pad is allowed).
			 @ CUP structure without WBDMY is not allowed , please make sure you draw WBDMY and turn on the right switch.
  X = CB_TRI_TIER_NON_CUP NOT INTERACT PADM1_TR
  X NOT INNER_CB_TR
  CB_TRI_TIER_NON_CUP NOT INTERACT PADM2_TR
  CB_TRI_TIER_NON_CUP NOT INTERACT PADM3_TR
  CB_TRI_TIER_NON_CUP NOT INTERACT PADM4_TR
  CB_TRI_TIER_NON_CUP NOT INTERACT PADM5_TR
  CB_TRI_TIER_NON_CUP NOT INTERACT PADM6_TR
  Y = CB_TRI_TIER_NON_CUP NOT ENCLOSE VIA1
  Y NOT INNER_CB_TR
  CB_TRI_TIER_NON_CUP NOT ENCLOSE VIA2
  CB_TRI_TIER_NON_CUP NOT ENCLOSE VIA3
  CB_TRI_TIER_NON_CUP NOT ENCLOSE VIA4
  CB_TRI_TIER_NON_CUP NOT ENCLOSE VIA5
}
CB.R.3.TR { @ Metal pad region draw slot is not allowed.
  HOLES M1CB_TR_NON_CUP
  HOLES M2CB_TR_NON_CUP
  HOLES M3CB_TR_NON_CUP
  HOLES M4CB_TR_NON_CUP
  HOLES M5CB_TR_NON_CUP
  HOLES M6CB_TR_NON_CUP
}
CBVIA1.EN.1a { @ VIA1 enclosure by metal >= 2
  ENC PAD_VIA1_NON_CUP M1  < 2 ABUT <90 SINGULAR REGION OUTSIDE ALSO
  ENC PAD_VIA1_NON_CUP M2 < 2 ABUT <90 SINGULAR REGION OUTSIDE ALSO
}

CBVIA2.EN.1a { @ VIA2 enclosure by metal >= 2
  ENC PAD_VIA2_NON_CUP M2  < 2 ABUT <90 SINGULAR REGION OUTSIDE ALSO
  ENC PAD_VIA2_NON_CUP M3 < 2 ABUT <90 SINGULAR REGION OUTSIDE ALSO
}

CBVIA3.EN.1a { @ VIA3 enclosure by metal >= 2
  ENC PAD_VIA3_NON_CUP M3  < 2 ABUT <90 SINGULAR REGION OUTSIDE ALSO
  ENC PAD_VIA3_NON_CUP M4 < 2 ABUT <90 SINGULAR REGION OUTSIDE ALSO
}

CBVIA4.EN.1a { @ VIA4 enclosure by metal >= 2
  ENC PAD_VIA4_NON_CUP M4  < 2 ABUT <90 SINGULAR REGION OUTSIDE ALSO
  ENC PAD_VIA4_NON_CUP M5 < 2 ABUT <90 SINGULAR REGION OUTSIDE ALSO
}

#IFNDEF TRL_DFS
#IFNDEF OBV_DFS

CBVIA5.EN.1a { @ VIA5 enclosure by metal >= 2
  ENC PAD_VIA5_NON_CUP M5  < 2 ABUT <90 SINGULAR REGION OUTSIDE ALSO
  ENC PAD_VIA5_NON_CUP M6 < 2 ABUT <90 SINGULAR REGION OUTSIDE ALSO
}
#ENDIF
#ENDIF


CBVIA1.EN.1b { @ VIA1 enclosure by metal <= 4 
  A = SIZE PADM1 BY -4
  B = EXPAND EDGE A OUTSIDE BY 4
  C = B NOT INTERACT PAD_VIA1_NON_CUP
  (C AND PADM2) NOT INTERACT WBDMY
  AA = SIZE PADM2 BY -4
  BB = EXPAND EDGE AA OUTSIDE BY 4
  CC = BB NOT INTERACT PAD_VIA1_NON_CUP
  (CC AND PADM1) NOT INTERACT WBDMY
}
//CBVIAx.EN.1 is checked by CBVIA1.EN.1a and CBVIA1.EN.1b
CBVIA2.EN.1b { @ VIA2 enclosure by metal <= 4 
  A = SIZE PADM2 BY -4
  B = EXPAND EDGE A OUTSIDE BY 4
  C = B NOT INTERACT PAD_VIA2_NON_CUP
  (C AND PADM3) NOT INTERACT WBDMY
  AA = SIZE PADM3 BY -4
  BB = EXPAND EDGE AA OUTSIDE BY 4
  CC = BB NOT INTERACT PAD_VIA2_NON_CUP
  (CC AND PADM2) NOT INTERACT WBDMY
}
//CBVIAx.EN.1 is checked by CBVIA2.EN.1a and CBVIA2.EN.1b
CBVIA3.EN.1b { @ VIA3 enclosure by metal <= 4 
  A = SIZE PADM3 BY -4
  B = EXPAND EDGE A OUTSIDE BY 4
  C = B NOT INTERACT PAD_VIA3_NON_CUP
  (C AND PADM4) NOT INTERACT WBDMY
  AA = SIZE PADM4 BY -4
  BB = EXPAND EDGE AA OUTSIDE BY 4
  CC = BB NOT INTERACT PAD_VIA3_NON_CUP
  (CC AND PADM3) NOT INTERACT WBDMY
}
//CBVIAx.EN.1 is checked by CBVIA3.EN.1a and CBVIA3.EN.1b
CBVIA4.EN.1b { @ VIA4 enclosure by metal <= 4 
  A = SIZE PADM4 BY -4
  B = EXPAND EDGE A OUTSIDE BY 4
  C = B NOT INTERACT PAD_VIA4_NON_CUP
  (C AND PADM5) NOT INTERACT WBDMY
  AA = SIZE PADM5 BY -4
  BB = EXPAND EDGE AA OUTSIDE BY 4
  CC = BB NOT INTERACT PAD_VIA4_NON_CUP
  (CC AND PADM4) NOT INTERACT WBDMY
}
//CBVIAx.EN.1 is checked by CBVIA4.EN.1a and CBVIA4.EN.1b
#IFNDEF TRL_DFS
#IFNDEF OBV_DFS

CBVIA5.EN.1b { @ VIA5 enclosure by metal <= 4 
  A = SIZE PADM5 BY -4
  B = EXPAND EDGE A OUTSIDE BY 4
  C = B NOT INTERACT PAD_VIA5_NON_CUP
  (C AND PADM6) NOT INTERACT WBDMY
  AA = SIZE PADM6 BY -4
  BB = EXPAND EDGE AA OUTSIDE BY 4
  CC = BB NOT INTERACT PAD_VIA5_NON_CUP
  (CC AND PADM5) NOT INTERACT WBDMY
}
#ENDIF
#ENDIF

//CBVIAx.EN.1 is checked by CBVIA5.EN.1a and CBVIA5.EN.1b


CBVIA1.W.1 { @ VIA1 width = 0.26um
#IFDEF PITCH_50_SINGLE
  NOT RECTANGLE PAD_VIA1_SI_NON_CUP == 0.26 BY == 0.26 ORTHOGONAL ONLY
#ELSE
#IFDEF PITCH_55_SINGLE
  NOT RECTANGLE PAD_VIA1_SI_NON_CUP == 0.26 BY == 0.26 ORTHOGONAL ONLY
#ENDIF
#ENDIF
  
#IFDEF PITCH_60_STAGGER
  NOT RECTANGLE PAD_VIA1_ST_NON_CUP == 0.26 BY == 0.26 ORTHOGONAL ONLY
#ELSE
#IFDEF PITCH_70_STAGGER
  NOT RECTANGLE PAD_VIA1_ST_NON_CUP == 0.26 BY == 0.26 ORTHOGONAL ONLY
#ELSE
#IFDEF PITCH_80_STAGGER
  NOT RECTANGLE PAD_VIA1_ST_NON_CUP == 0.26 BY == 0.26 ORTHOGONAL ONLY
#ENDIF
#ENDIF
#ENDIF
  
  NOT RECTANGLE PAD_VIA1_TR_NON_CUP == 0.26 BY == 0.26 ORTHOGONAL ONLY
}
CBVIA2.W.1 { @ VIA2 width = 0.26um
#IFDEF PITCH_50_SINGLE
  NOT RECTANGLE PAD_VIA2_SI_NON_CUP == 0.26 BY == 0.26 ORTHOGONAL ONLY
#ELSE
#IFDEF PITCH_55_SINGLE
  NOT RECTANGLE PAD_VIA2_SI_NON_CUP == 0.26 BY == 0.26 ORTHOGONAL ONLY
#ENDIF
#ENDIF
  
#IFDEF PITCH_60_STAGGER
  NOT RECTANGLE PAD_VIA2_ST_NON_CUP == 0.26 BY == 0.26 ORTHOGONAL ONLY
#ELSE
#IFDEF PITCH_70_STAGGER
  NOT RECTANGLE PAD_VIA2_ST_NON_CUP == 0.26 BY == 0.26 ORTHOGONAL ONLY
#ELSE
#IFDEF PITCH_80_STAGGER
  NOT RECTANGLE PAD_VIA2_ST_NON_CUP == 0.26 BY == 0.26 ORTHOGONAL ONLY
#ENDIF
#ENDIF
#ENDIF
  
  NOT RECTANGLE PAD_VIA2_TR_NON_CUP == 0.26 BY == 0.26 ORTHOGONAL ONLY
}
CBVIA3.W.1 { @ VIA3 width = 0.26um
#IFDEF PITCH_50_SINGLE
  NOT RECTANGLE PAD_VIA3_SI_NON_CUP == 0.26 BY == 0.26 ORTHOGONAL ONLY
#ELSE
#IFDEF PITCH_55_SINGLE
  NOT RECTANGLE PAD_VIA3_SI_NON_CUP == 0.26 BY == 0.26 ORTHOGONAL ONLY
#ENDIF
#ENDIF
  
#IFDEF PITCH_60_STAGGER
  NOT RECTANGLE PAD_VIA3_ST_NON_CUP == 0.26 BY == 0.26 ORTHOGONAL ONLY
#ELSE
#IFDEF PITCH_70_STAGGER
  NOT RECTANGLE PAD_VIA3_ST_NON_CUP == 0.26 BY == 0.26 ORTHOGONAL ONLY
#ELSE
#IFDEF PITCH_80_STAGGER
  NOT RECTANGLE PAD_VIA3_ST_NON_CUP == 0.26 BY == 0.26 ORTHOGONAL ONLY
#ENDIF
#ENDIF
#ENDIF
  
  NOT RECTANGLE PAD_VIA3_TR_NON_CUP == 0.26 BY == 0.26 ORTHOGONAL ONLY
}
CBVIA4.W.1 { @ VIA4 width = 0.26um
#IFDEF PITCH_50_SINGLE
  NOT RECTANGLE PAD_VIA4_SI_NON_CUP == 0.26 BY == 0.26 ORTHOGONAL ONLY
#ELSE
#IFDEF PITCH_55_SINGLE
  NOT RECTANGLE PAD_VIA4_SI_NON_CUP == 0.26 BY == 0.26 ORTHOGONAL ONLY
#ENDIF
#ENDIF
  
#IFDEF PITCH_60_STAGGER
  NOT RECTANGLE PAD_VIA4_ST_NON_CUP == 0.26 BY == 0.26 ORTHOGONAL ONLY
#ELSE
#IFDEF PITCH_70_STAGGER
  NOT RECTANGLE PAD_VIA4_ST_NON_CUP == 0.26 BY == 0.26 ORTHOGONAL ONLY
#ELSE
#IFDEF PITCH_80_STAGGER
  NOT RECTANGLE PAD_VIA4_ST_NON_CUP == 0.26 BY == 0.26 ORTHOGONAL ONLY
#ENDIF
#ENDIF
#ENDIF
  
  NOT RECTANGLE PAD_VIA4_TR_NON_CUP == 0.26 BY == 0.26 ORTHOGONAL ONLY
}
CBVIA1.S.1 { @ VIA1 space >= 0.45um
#IFDEF PITCH_50_SINGLE
  EXT PAD_VIA1_SI_NON_CUP < 0.45 ABUT <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_55_SINGLE
  EXT PAD_VIA1_SI_NON_CUP < 0.45 ABUT <90 SINGULAR REGION
#ENDIF
#ENDIF
  
#IFDEF PITCH_60_STAGGER
  EXT PAD_VIA1_ST_NON_CUP < 0.45 ABUT <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_70_STAGGER
  EXT PAD_VIA1_ST_NON_CUP < 0.45 ABUT <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_80_STAGGER
  EXT PAD_VIA1_ST_NON_CUP < 0.45 ABUT <90 SINGULAR REGION
#ENDIF
#ENDIF
#ENDIF
  EXT PAD_VIA1_TR_NON_CUP < 0.45 ABUT <90 SINGULAR REGION
}
CBVIA2.S.1 { @ VIA2 space >= 0.45um
#IFDEF PITCH_50_SINGLE
  EXT PAD_VIA2_SI_NON_CUP < 0.45 ABUT <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_55_SINGLE
  EXT PAD_VIA2_SI_NON_CUP < 0.45 ABUT <90 SINGULAR REGION
#ENDIF
#ENDIF
  
#IFDEF PITCH_60_STAGGER
  EXT PAD_VIA2_ST_NON_CUP < 0.45 ABUT <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_70_STAGGER
  EXT PAD_VIA2_ST_NON_CUP < 0.45 ABUT <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_80_STAGGER
  EXT PAD_VIA2_ST_NON_CUP < 0.45 ABUT <90 SINGULAR REGION
#ENDIF
#ENDIF
#ENDIF
  EXT PAD_VIA2_TR_NON_CUP < 0.45 ABUT <90 SINGULAR REGION
}
CBVIA3.S.1 { @ VIA3 space >= 0.45um
#IFDEF PITCH_50_SINGLE
  EXT PAD_VIA3_SI_NON_CUP < 0.45 ABUT <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_55_SINGLE
  EXT PAD_VIA3_SI_NON_CUP < 0.45 ABUT <90 SINGULAR REGION
#ENDIF
#ENDIF
  
#IFDEF PITCH_60_STAGGER
  EXT PAD_VIA3_ST_NON_CUP < 0.45 ABUT <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_70_STAGGER
  EXT PAD_VIA3_ST_NON_CUP < 0.45 ABUT <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_80_STAGGER
  EXT PAD_VIA3_ST_NON_CUP < 0.45 ABUT <90 SINGULAR REGION
#ENDIF
#ENDIF
#ENDIF
  EXT PAD_VIA3_TR_NON_CUP < 0.45 ABUT <90 SINGULAR REGION
}
CBVIA4.S.1 { @ VIA4 space >= 0.45um
#IFDEF PITCH_50_SINGLE
  EXT PAD_VIA4_SI_NON_CUP < 0.45 ABUT <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_55_SINGLE
  EXT PAD_VIA4_SI_NON_CUP < 0.45 ABUT <90 SINGULAR REGION
#ENDIF
#ENDIF
  
#IFDEF PITCH_60_STAGGER
  EXT PAD_VIA4_ST_NON_CUP < 0.45 ABUT <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_70_STAGGER
  EXT PAD_VIA4_ST_NON_CUP < 0.45 ABUT <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_80_STAGGER
  EXT PAD_VIA4_ST_NON_CUP < 0.45 ABUT <90 SINGULAR REGION
#ENDIF
#ENDIF
#ENDIF
  EXT PAD_VIA4_TR_NON_CUP < 0.45 ABUT <90 SINGULAR REGION
}
CBVIA12.S.2 { @ VIA1 VIA2 space >= 0.13um
#IFDEF PITCH_50_SINGLE
  EXT PAD_VIA1_SI_NON_CUP PAD_VIA2_SI_NON_CUP < 0.13 ABUT <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_55_SINGLE
  EXT PAD_VIA1_SI_NON_CUP PAD_VIA2_SI_NON_CUP < 0.13 ABUT <90 SINGULAR REGION
#ENDIF
#ENDIF
  
#IFDEF PITCH_60_STAGGER
  EXT PAD_VIA1_ST_NON_CUP PAD_VIA2_ST_NON_CUP < 0.13 ABUT <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_70_STAGGER
  EXT PAD_VIA1_ST_NON_CUP PAD_VIA2_ST_NON_CUP < 0.13 ABUT <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_80_STAGGER
  EXT PAD_VIA1_ST_NON_CUP PAD_VIA2_ST_NON_CUP < 0.13 ABUT <90 SINGULAR REGION
#ENDIF
#ENDIF
#ENDIF
  
  EXT PAD_VIA1_TR_NON_CUP PAD_VIA2_TR_NON_CUP < 0.13 ABUT <90 SINGULAR REGION
}
CBVIA23.S.2 { @ VIA2 VIA3 space >= 0.13um
#IFDEF PITCH_50_SINGLE
  EXT PAD_VIA2_SI_NON_CUP PAD_VIA3_SI_NON_CUP < 0.13 ABUT <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_55_SINGLE
  EXT PAD_VIA2_SI_NON_CUP PAD_VIA3_SI_NON_CUP < 0.13 ABUT <90 SINGULAR REGION
#ENDIF
#ENDIF
  
#IFDEF PITCH_60_STAGGER
  EXT PAD_VIA2_ST_NON_CUP PAD_VIA3_ST_NON_CUP < 0.13 ABUT <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_70_STAGGER
  EXT PAD_VIA2_ST_NON_CUP PAD_VIA3_ST_NON_CUP < 0.13 ABUT <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_80_STAGGER
  EXT PAD_VIA2_ST_NON_CUP PAD_VIA3_ST_NON_CUP < 0.13 ABUT <90 SINGULAR REGION
#ENDIF
#ENDIF
#ENDIF
  
  EXT PAD_VIA2_TR_NON_CUP PAD_VIA3_TR_NON_CUP < 0.13 ABUT <90 SINGULAR REGION
}
CBVIA34.S.2 { @ VIA3 VIA4 space >= 0.13um
#IFDEF PITCH_50_SINGLE
  EXT PAD_VIA3_SI_NON_CUP PAD_VIA4_SI_NON_CUP < 0.13 ABUT <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_55_SINGLE
  EXT PAD_VIA3_SI_NON_CUP PAD_VIA4_SI_NON_CUP < 0.13 ABUT <90 SINGULAR REGION
#ENDIF
#ENDIF
  
#IFDEF PITCH_60_STAGGER
  EXT PAD_VIA3_ST_NON_CUP PAD_VIA4_ST_NON_CUP < 0.13 ABUT <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_70_STAGGER
  EXT PAD_VIA3_ST_NON_CUP PAD_VIA4_ST_NON_CUP < 0.13 ABUT <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_80_STAGGER
  EXT PAD_VIA3_ST_NON_CUP PAD_VIA4_ST_NON_CUP < 0.13 ABUT <90 SINGULAR REGION
#ENDIF
#ENDIF
#ENDIF
  
  EXT PAD_VIA3_TR_NON_CUP PAD_VIA4_TR_NON_CUP < 0.13 ABUT <90 SINGULAR REGION
}
#IFNDEF TRL_DFS
#IFNDEF OBV_DFS
CBVIAT.W.1 { @ VIA5 must be 0.36 x 0.36um
#IFDEF PITCH_50_SINGLE
  NOT RECTANGLE PAD_VIA5_SI_NON_CUP == 0.36 BY == 0.36 ORTHOGONAL ONLY
#ELSE
#IFDEF PITCH_55_SINGLE
  NOT RECTANGLE PAD_VIA5_SI_NON_CUP == 0.36 BY == 0.36 ORTHOGONAL ONLY
#ENDIF
#ENDIF
  
#IFDEF PITCH_60_STAGGER
  NOT RECTANGLE PAD_VIA5_ST_NON_CUP == 0.36 BY == 0.36 ORTHOGONAL ONLY
#ELSE
#IFDEF PITCH_70_STAGGER
  NOT RECTANGLE PAD_VIA5_ST_NON_CUP == 0.36 BY == 0.36 ORTHOGONAL ONLY
#ELSE
#IFDEF PITCH_80_STAGGER
  NOT RECTANGLE PAD_VIA5_ST_NON_CUP == 0.36 BY == 0.36 ORTHOGONAL ONLY
#ENDIF
#ENDIF
#ENDIF
  
  NOT RECTANGLE PAD_VIA5_TR_NON_CUP == 0.36 BY == 0.36 ORTHOGONAL ONLY
}
CBVIAT.S.1 { @ VIA5 space >= 0.35um
#IFDEF PITCH_50_SINGLE
  EXT PAD_VIA5_SI_NON_CUP < 0.35 ABUT <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_55_SINGLE
  EXT PAD_VIA5_SI_NON_CUP < 0.35 ABUT <90 SINGULAR REGION
#ENDIF
#ENDIF
  
#IFDEF PITCH_60_STAGGER
  EXT PAD_VIA5_ST_NON_CUP < 0.35 ABUT <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_70_STAGGER
  EXT PAD_VIA5_ST_NON_CUP < 0.35 ABUT <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_80_STAGGER
  EXT PAD_VIA5_ST_NON_CUP < 0.35 ABUT <90 SINGULAR REGION
#ENDIF
#ENDIF
#ENDIF
  
  EXT PAD_VIA5_TR_NON_CUP < 0.35 ABUT <90 SINGULAR REGION
}
CBVIAT.S.2 { @ VIA4 VIA5 space >= 0.06um
#IFDEF PITCH_50_SINGLE
  EXT PAD_VIA4_SI_NON_CUP PAD_VIA5_SI_NON_CUP < 0.06 ABUT <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_55_SINGLE
  EXT PAD_VIA4_SI_NON_CUP PAD_VIA5_SI_NON_CUP < 0.06 ABUT <90 SINGULAR REGION
#ENDIF
#ENDIF
  
#IFDEF PITCH_60_STAGGER
  EXT PAD_VIA4_ST_NON_CUP PAD_VIA5_ST_NON_CUP < 0.06 ABUT <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_70_STAGGER
  EXT PAD_VIA4_ST_NON_CUP PAD_VIA5_ST_NON_CUP < 0.06 ABUT <90 SINGULAR REGION
#ELSE
#IFDEF PITCH_80_STAGGER
  EXT PAD_VIA4_ST_NON_CUP PAD_VIA5_ST_NON_CUP < 0.06 ABUT <90 SINGULAR REGION
#ENDIF
#ENDIF
#ENDIF
  
  EXT PAD_VIA4_TR_NON_CUP PAD_VIA5_TR_NON_CUP < 0.06 ABUT <90 SINGULAR REGION
}
#ENDIF
#ENDIF

#IFDEF PITCH_50_SINGLE
CONNECT PAD_VIA1_SI_NON_CUP CB_SINGLE_NON_CUP
CONNECT PAD_VIA2_SI_NON_CUP CB_SINGLE_NON_CUP
CONNECT PAD_VIA3_SI_NON_CUP CB_SINGLE_NON_CUP
CONNECT PAD_VIA4_SI_NON_CUP CB_SINGLE_NON_CUP
CONNECT PAD_VIA5_SI_NON_CUP CB_SINGLE_NON_CUP
#ELSE
#IFDEF PITCH_55_SINGLE
CONNECT PAD_VIA1_SI_NON_CUP CB_SINGLE_NON_CUP
CONNECT PAD_VIA2_SI_NON_CUP CB_SINGLE_NON_CUP
CONNECT PAD_VIA3_SI_NON_CUP CB_SINGLE_NON_CUP
CONNECT PAD_VIA4_SI_NON_CUP CB_SINGLE_NON_CUP
CONNECT PAD_VIA5_SI_NON_CUP CB_SINGLE_NON_CUP
#ENDIF
#ENDIF
#IFDEF PITCH_60_STAGGER
CONNECT PAD_VIA1_ST_NON_CUP OUTER_CB_ST_NON_CUP
CONNECT PAD_VIA1_ST_NON_CUP INNER_CB_ST_NON_CUP
CONNECT PAD_VIA2_ST_NON_CUP OUTER_CB_ST_NON_CUP
CONNECT PAD_VIA2_ST_NON_CUP INNER_CB_ST_NON_CUP
CONNECT PAD_VIA3_ST_NON_CUP OUTER_CB_ST_NON_CUP
CONNECT PAD_VIA3_ST_NON_CUP INNER_CB_ST_NON_CUP
CONNECT PAD_VIA4_ST_NON_CUP OUTER_CB_ST_NON_CUP
CONNECT PAD_VIA4_ST_NON_CUP INNER_CB_ST_NON_CUP
CONNECT PAD_VIA5_ST_NON_CUP OUTER_CB_ST_NON_CUP
CONNECT PAD_VIA5_ST_NON_CUP INNER_CB_ST_NON_CUP
#ELSE
#IFDEF PITCH_70_STAGGER
CONNECT PAD_VIA1_ST_NON_CUP OUTER_CB_ST_NON_CUP
CONNECT PAD_VIA1_ST_NON_CUP INNER_CB_ST_NON_CUP
CONNECT PAD_VIA2_ST_NON_CUP OUTER_CB_ST_NON_CUP
CONNECT PAD_VIA2_ST_NON_CUP INNER_CB_ST_NON_CUP
CONNECT PAD_VIA3_ST_NON_CUP OUTER_CB_ST_NON_CUP
CONNECT PAD_VIA3_ST_NON_CUP INNER_CB_ST_NON_CUP
CONNECT PAD_VIA4_ST_NON_CUP OUTER_CB_ST_NON_CUP
CONNECT PAD_VIA4_ST_NON_CUP INNER_CB_ST_NON_CUP
CONNECT PAD_VIA5_ST_NON_CUP OUTER_CB_ST_NON_CUP
CONNECT PAD_VIA5_ST_NON_CUP INNER_CB_ST_NON_CUP
#ELSE
#IFDEF PITCH_80_STAGGER
CONNECT PAD_VIA1_ST_NON_CUP OUTER_CB_ST_NON_CUP
CONNECT PAD_VIA1_ST_NON_CUP INNER_CB_ST_NON_CUP
CONNECT PAD_VIA2_ST_NON_CUP OUTER_CB_ST_NON_CUP
CONNECT PAD_VIA2_ST_NON_CUP INNER_CB_ST_NON_CUP
CONNECT PAD_VIA3_ST_NON_CUP OUTER_CB_ST_NON_CUP
CONNECT PAD_VIA3_ST_NON_CUP INNER_CB_ST_NON_CUP
CONNECT PAD_VIA4_ST_NON_CUP OUTER_CB_ST_NON_CUP
CONNECT PAD_VIA4_ST_NON_CUP INNER_CB_ST_NON_CUP
CONNECT PAD_VIA5_ST_NON_CUP OUTER_CB_ST_NON_CUP
CONNECT PAD_VIA5_ST_NON_CUP INNER_CB_ST_NON_CUP
#ENDIF
#ENDIF
#ENDIF

#IFDEF PITCH_80_TRITIER
CONNECT PAD_VIA1_TR_NON_CUP OUTER_CB_TR_NON_CUP
CONNECT PAD_VIA1_TR_NON_CUP MID_CB_TR_NON_CUP
CONNECT PAD_VIA1_TR_NON_CUP INNER_CB_TR_NON_CUP
CONNECT PAD_VIA2_TR_NON_CUP OUTER_CB_TR_NON_CUP
CONNECT PAD_VIA2_TR_NON_CUP MID_CB_TR_NON_CUP
CONNECT PAD_VIA2_TR_NON_CUP INNER_CB_TR_NON_CUP
CONNECT PAD_VIA3_TR_NON_CUP OUTER_CB_TR_NON_CUP
CONNECT PAD_VIA3_TR_NON_CUP MID_CB_TR_NON_CUP
CONNECT PAD_VIA3_TR_NON_CUP INNER_CB_TR_NON_CUP
CONNECT PAD_VIA4_TR_NON_CUP OUTER_CB_TR_NON_CUP
CONNECT PAD_VIA4_TR_NON_CUP MID_CB_TR_NON_CUP
CONNECT PAD_VIA4_TR_NON_CUP INNER_CB_TR_NON_CUP
CONNECT PAD_VIA5_TR_NON_CUP OUTER_CB_TR_NON_CUP
CONNECT PAD_VIA5_TR_NON_CUP MID_CB_TR_NON_CUP
CONNECT PAD_VIA5_TR_NON_CUP INNER_CB_TR_NON_CUP
#ENDIF

#IFDEF PITCH_50_SINGLE
CBVIA1.R.1.OUTER.P50 { @ ratio of outer VIA1 to CB >= 0.05
  NET AREA RATIO CB_SINGLE_NON_CUP PAD_VIA1_SI_NON_CUP < 0.05
  [AREA(PAD_VIA1_SI_NON_CUP)/AREA(CB_SINGLE_NON_CUP)
  ] RDB via1_single_ratio.log CB_SINGLE_NON_CUP PAD_VIA1_SI_NON_CUP
}
#ELSE
#IFDEF PITCH_55_SINGLE
CBVIA1.R.1.OUTER.P55 { @ ratio of outer VIA1 to CB >= 0.05
  NET AREA RATIO CB_SINGLE_NON_CUP PAD_VIA1_SI_NON_CUP < 0.05
  [AREA(PAD_VIA1_SI_NON_CUP)/AREA(CB_SINGLE_NON_CUP)
  ] RDB via1_single_ratio.log CB_SINGLE_NON_CUP PAD_VIA1_SI_NON_CUP
}
#ENDIF
#ENDIF

#IFDEF PITCH_60_STAGGER
CBVIA1.R.1.OUTER.P60 { @ ratio of outer VIA1 to CB >= 0.05
  NET AREA RATIO OUTER_CB_ST_NON_CUP PAD_VIA1_ST_NON_CUP < 0.05
  [AREA(PAD_VIA1_ST_NON_CUP)/AREA(OUTER_CB_ST_NON_CUP)
  ] RDB via1_stagger_out_ratio.log OUTER_CB_ST_NON_CUP PAD_VIA1_ST_NON_CUP
}
CBVIA1.R.1.1.P60{ @ ratio of inner VIA1 to CB >= 0.025
  NET AREA RATIO INNER_CB_ST_NON_CUP PAD_VIA1_ST_NON_CUP < 0.025
  [AREA(PAD_VIA1_ST_NON_CUP)/AREA(INNER_CB_ST_NON_CUP)
  ] RDB via1_stagger_in_ratio.log INNER_CB_ST_NON_CUP PAD_VIA1_ST_NON_CUP
}
#ELSE
#IFDEF PITCH_70_STAGGER
CBVIA1.R.1.OUTER.P70 { @ ratio of outer VIA1 to CB >= 0.05
  NET AREA RATIO OUTER_CB_ST_NON_CUP PAD_VIA1_ST_NON_CUP < 0.05
  [AREA(PAD_VIA1_ST_NON_CUP)/AREA(OUTER_CB_ST_NON_CUP)
  ] RDB via1_stagger_out_ratio.log OUTER_CB_ST_NON_CUP PAD_VIA1_ST_NON_CUP
}
CBVIA1.R.1.1.P70{ @ ratio of inner VIA1 to CB >= 0.025
  NET AREA RATIO INNER_CB_ST_NON_CUP PAD_VIA1_ST_NON_CUP < 0.025
  [AREA(PAD_VIA1_ST_NON_CUP)/AREA(INNER_CB_ST_NON_CUP)
  ] RDB via1_stagger_in_ratio.log INNER_CB_ST_NON_CUP PAD_VIA1_ST_NON_CUP
}
#ELSE
#IFDEF PITCH_80_STAGGER
CBVIA1.R.1.OUTER.P80S { @ ratio of outer VIA1 to CB >= 0.05
  NET AREA RATIO OUTER_CB_ST_NON_CUP PAD_VIA1_ST_NON_CUP < 0.05
  [AREA(PAD_VIA1_ST_NON_CUP)/AREA(OUTER_CB_ST_NON_CUP)
  ] RDB via1_stagger_out_ratio.log OUTER_CB_ST_NON_CUP PAD_VIA1_ST_NON_CUP
}
CBVIA1.R.1.1.P80S{ @ ratio of inner VIA1 to CB >= 0.025
  NET AREA RATIO INNER_CB_ST_NON_CUP PAD_VIA1_ST_NON_CUP < 0.025
  [AREA(PAD_VIA1_ST_NON_CUP)/AREA(INNER_CB_ST_NON_CUP)
  ] RDB via1_stagger_in_ratio.log INNER_CB_ST_NON_CUP PAD_VIA1_ST_NON_CUP
}
#ENDIF
#ENDIF
#ENDIF

#IFDEF PITCH_80_TRITIER
CBVIA1.R.1.OUTER.P80T { @ ratio of outer VIA1 to CB >= 0.05
  NET AREA RATIO  OUTER_CB_TR_NON_CUP PAD_VIA1_TR_NON_CUP < 0.05
  [AREA(PAD_VIA1_TR_NON_CUP)/AREA(OUTER_CB_TR_NON_CUP)
  ] RDB via1_tri_tier_out_ratio.log OUTER_CB_TR_NON_CUP PAD_VIA1_TR_NON_CUP
}
CBVIA1.R.1.1.P80T{ @ ratio of inner/middle VIA1 to CB >= 0.025
  NET AREA RATIO  MID_CB_TR_NON_CUP PAD_VIA1_TR_NON_CUP < 0.025
  [AREA(PAD_VIA1_TR_NON_CUP)/AREA(MID_CB_TR_NON_CUP)
  ] RDB via1_tri_tier_mid_ratio.log MID_CB_TR_NON_CUP PAD_VIA1_TR_NON_CUP
}
#ENDIF
#IFDEF PITCH_50_SINGLE
CBVIA2.R.1.OUTER.P50 { @ ratio of outer VIA2 to CB >= 0.05
  NET AREA RATIO CB_SINGLE_NON_CUP PAD_VIA2_SI_NON_CUP < 0.05
  [AREA(PAD_VIA2_SI_NON_CUP)/AREA(CB_SINGLE_NON_CUP)
  ] RDB via2_single_ratio.log CB_SINGLE_NON_CUP PAD_VIA2_SI_NON_CUP
}
#ELSE
#IFDEF PITCH_55_SINGLE
CBVIA2.R.1.OUTER.P55 { @ ratio of outer VIA2 to CB >= 0.05
  NET AREA RATIO CB_SINGLE_NON_CUP PAD_VIA2_SI_NON_CUP < 0.05
  [AREA(PAD_VIA2_SI_NON_CUP)/AREA(CB_SINGLE_NON_CUP)
  ] RDB via2_single_ratio.log CB_SINGLE_NON_CUP PAD_VIA2_SI_NON_CUP
}
#ENDIF
#ENDIF

#IFDEF PITCH_60_STAGGER
CBVIA2.R.1.OUTER.P60 { @ ratio of outer VIA2 to CB >= 0.05
  NET AREA RATIO OUTER_CB_ST_NON_CUP PAD_VIA2_ST_NON_CUP < 0.05
  [AREA(PAD_VIA2_ST_NON_CUP)/AREA(OUTER_CB_ST_NON_CUP)
  ] RDB via2_stagger_out_ratio.log OUTER_CB_ST_NON_CUP PAD_VIA2_ST_NON_CUP
}
CBVIA2.R.1.1.P60{ @ ratio of inner VIA2 to CB >= 0.025
  NET AREA RATIO INNER_CB_ST_NON_CUP PAD_VIA2_ST_NON_CUP < 0.025
  [AREA(PAD_VIA2_ST_NON_CUP)/AREA(INNER_CB_ST_NON_CUP)
  ] RDB via2_stagger_in_ratio.log INNER_CB_ST_NON_CUP PAD_VIA2_ST_NON_CUP
}
#ELSE
#IFDEF PITCH_70_STAGGER
CBVIA2.R.1.OUTER.P70 { @ ratio of outer VIA2 to CB >= 0.05
  NET AREA RATIO OUTER_CB_ST_NON_CUP PAD_VIA2_ST_NON_CUP < 0.05
  [AREA(PAD_VIA2_ST_NON_CUP)/AREA(OUTER_CB_ST_NON_CUP)
  ] RDB via2_stagger_out_ratio.log OUTER_CB_ST_NON_CUP PAD_VIA2_ST_NON_CUP
}
CBVIA2.R.1.1.P70{ @ ratio of inner VIA2 to CB >= 0.025
  NET AREA RATIO INNER_CB_ST_NON_CUP PAD_VIA2_ST_NON_CUP < 0.025
  [AREA(PAD_VIA2_ST_NON_CUP)/AREA(INNER_CB_ST_NON_CUP)
  ] RDB via2_stagger_in_ratio.log INNER_CB_ST_NON_CUP PAD_VIA2_ST_NON_CUP
}
#ELSE
#IFDEF PITCH_80_STAGGER
CBVIA2.R.1.OUTER.P80S { @ ratio of outer VIA2 to CB >= 0.05
  NET AREA RATIO OUTER_CB_ST_NON_CUP PAD_VIA2_ST_NON_CUP < 0.05
  [AREA(PAD_VIA2_ST_NON_CUP)/AREA(OUTER_CB_ST_NON_CUP)
  ] RDB via2_stagger_out_ratio.log OUTER_CB_ST_NON_CUP PAD_VIA2_ST_NON_CUP
}
CBVIA2.R.1.1.P80S{ @ ratio of inner VIA2 to CB >= 0.025
  NET AREA RATIO INNER_CB_ST_NON_CUP PAD_VIA2_ST_NON_CUP < 0.025
  [AREA(PAD_VIA2_ST_NON_CUP)/AREA(INNER_CB_ST_NON_CUP)
  ] RDB via2_stagger_in_ratio.log INNER_CB_ST_NON_CUP PAD_VIA2_ST_NON_CUP
}
#ENDIF
#ENDIF
#ENDIF

#IFDEF PITCH_80_TRITIER
CBVIA2.R.1.OUTER.P80T { @ ratio of outer VIA2 to CB >= 0.05
  NET AREA RATIO  OUTER_CB_TR_NON_CUP PAD_VIA2_TR_NON_CUP < 0.05
  [AREA(PAD_VIA2_TR_NON_CUP)/AREA(OUTER_CB_TR_NON_CUP)
  ] RDB via2_tri_tier_out_ratio.log OUTER_CB_TR_NON_CUP PAD_VIA2_TR_NON_CUP
}
CBVIA2.R.1.1.P80T{ @ ratio of inner/middle VIA2 to CB >= 0.025
  NET AREA RATIO  INNER_CB_TR_NON_CUP PAD_VIA2_TR_NON_CUP < 0.025
  [AREA(PAD_VIA2_TR_NON_CUP)/AREA(INNER_CB_TR_NON_CUP)
  ] RDB via2_tri_tier_in_ratio.log INNER_CB_TR_NON_CUP PAD_VIA2_TR_NON_CUP
  NET AREA RATIO  MID_CB_TR_NON_CUP PAD_VIA2_TR_NON_CUP < 0.025
  [AREA(PAD_VIA2_TR_NON_CUP)/AREA(MID_CB_TR_NON_CUP)
  ] RDB via2_tri_tier_mid_ratio.log MID_CB_TR_NON_CUP PAD_VIA2_TR_NON_CUP
}
#ENDIF
#IFDEF PITCH_50_SINGLE
CBVIA3.R.1.OUTER.P50 { @ ratio of outer VIA3 to CB >= 0.05
  NET AREA RATIO CB_SINGLE_NON_CUP PAD_VIA3_SI_NON_CUP < 0.05
  [AREA(PAD_VIA3_SI_NON_CUP)/AREA(CB_SINGLE_NON_CUP)
  ] RDB via3_single_ratio.log CB_SINGLE_NON_CUP PAD_VIA3_SI_NON_CUP
}
#ELSE
#IFDEF PITCH_55_SINGLE
CBVIA3.R.1.OUTER.P55 { @ ratio of outer VIA3 to CB >= 0.05
  NET AREA RATIO CB_SINGLE_NON_CUP PAD_VIA3_SI_NON_CUP < 0.05
  [AREA(PAD_VIA3_SI_NON_CUP)/AREA(CB_SINGLE_NON_CUP)
  ] RDB via3_single_ratio.log CB_SINGLE_NON_CUP PAD_VIA3_SI_NON_CUP
}
#ENDIF
#ENDIF

#IFDEF PITCH_60_STAGGER
CBVIA3.R.1.OUTER.P60 { @ ratio of outer VIA3 to CB >= 0.05
  NET AREA RATIO OUTER_CB_ST_NON_CUP PAD_VIA3_ST_NON_CUP < 0.05
  [AREA(PAD_VIA3_ST_NON_CUP)/AREA(OUTER_CB_ST_NON_CUP)
  ] RDB via3_stagger_out_ratio.log OUTER_CB_ST_NON_CUP PAD_VIA3_ST_NON_CUP
}
CBVIA3.R.1.1.P60{ @ ratio of inner VIA3 to CB >= 0.025
  NET AREA RATIO INNER_CB_ST_NON_CUP PAD_VIA3_ST_NON_CUP < 0.025
  [AREA(PAD_VIA3_ST_NON_CUP)/AREA(INNER_CB_ST_NON_CUP)
  ] RDB via3_stagger_in_ratio.log INNER_CB_ST_NON_CUP PAD_VIA3_ST_NON_CUP
}
#ELSE
#IFDEF PITCH_70_STAGGER
CBVIA3.R.1.OUTER.P70 { @ ratio of outer VIA3 to CB >= 0.05
  NET AREA RATIO OUTER_CB_ST_NON_CUP PAD_VIA3_ST_NON_CUP < 0.05
  [AREA(PAD_VIA3_ST_NON_CUP)/AREA(OUTER_CB_ST_NON_CUP)
  ] RDB via3_stagger_out_ratio.log OUTER_CB_ST_NON_CUP PAD_VIA3_ST_NON_CUP
}
CBVIA3.R.1.1.P70{ @ ratio of inner VIA3 to CB >= 0.025
  NET AREA RATIO INNER_CB_ST_NON_CUP PAD_VIA3_ST_NON_CUP < 0.025
  [AREA(PAD_VIA3_ST_NON_CUP)/AREA(INNER_CB_ST_NON_CUP)
  ] RDB via3_stagger_in_ratio.log INNER_CB_ST_NON_CUP PAD_VIA3_ST_NON_CUP
}
#ELSE
#IFDEF PITCH_80_STAGGER
CBVIA3.R.1.OUTER.P80S { @ ratio of outer VIA3 to CB >= 0.05
  NET AREA RATIO OUTER_CB_ST_NON_CUP PAD_VIA3_ST_NON_CUP < 0.05
  [AREA(PAD_VIA3_ST_NON_CUP)/AREA(OUTER_CB_ST_NON_CUP)
  ] RDB via3_stagger_out_ratio.log OUTER_CB_ST_NON_CUP PAD_VIA3_ST_NON_CUP
}
CBVIA3.R.1.1.P80S{ @ ratio of inner VIA3 to CB >= 0.025
  NET AREA RATIO INNER_CB_ST_NON_CUP PAD_VIA3_ST_NON_CUP < 0.025
  [AREA(PAD_VIA3_ST_NON_CUP)/AREA(INNER_CB_ST_NON_CUP)
  ] RDB via3_stagger_in_ratio.log INNER_CB_ST_NON_CUP PAD_VIA3_ST_NON_CUP
}
#ENDIF
#ENDIF
#ENDIF

#IFDEF PITCH_80_TRITIER
CBVIA3.R.1.OUTER.P80T { @ ratio of outer VIA3 to CB >= 0.05
  NET AREA RATIO  OUTER_CB_TR_NON_CUP PAD_VIA3_TR_NON_CUP < 0.05
  [AREA(PAD_VIA3_TR_NON_CUP)/AREA(OUTER_CB_TR_NON_CUP)
  ] RDB via3_tri_tier_out_ratio.log OUTER_CB_TR_NON_CUP PAD_VIA3_TR_NON_CUP
}
CBVIA3.R.1.1.P80T{ @ ratio of inner/middle VIA3 to CB >= 0.025
  NET AREA RATIO  INNER_CB_TR_NON_CUP PAD_VIA3_TR_NON_CUP < 0.025
  [AREA(PAD_VIA3_TR_NON_CUP)/AREA(INNER_CB_TR_NON_CUP)
  ] RDB via3_tri_tier_in_ratio.log INNER_CB_TR_NON_CUP PAD_VIA3_TR_NON_CUP
  NET AREA RATIO  MID_CB_TR_NON_CUP PAD_VIA3_TR_NON_CUP < 0.025
  [AREA(PAD_VIA3_TR_NON_CUP)/AREA(MID_CB_TR_NON_CUP)
  ] RDB via3_tri_tier_mid_ratio.log MID_CB_TR_NON_CUP PAD_VIA3_TR_NON_CUP
}
#ENDIF
#IFDEF PITCH_50_SINGLE
CBVIA4.R.1.OUTER.P50 { @ ratio of outer VIA4 to CB >= 0.05
  NET AREA RATIO CB_SINGLE_NON_CUP PAD_VIA4_SI_NON_CUP < 0.05
  [AREA(PAD_VIA4_SI_NON_CUP)/AREA(CB_SINGLE_NON_CUP)
  ] RDB via4_single_ratio.log CB_SINGLE_NON_CUP PAD_VIA4_SI_NON_CUP
}
#ELSE
#IFDEF PITCH_55_SINGLE
CBVIA4.R.1.OUTER.P55 { @ ratio of outer VIA4 to CB >= 0.05
  NET AREA RATIO CB_SINGLE_NON_CUP PAD_VIA4_SI_NON_CUP < 0.05
  [AREA(PAD_VIA4_SI_NON_CUP)/AREA(CB_SINGLE_NON_CUP)
  ] RDB via4_single_ratio.log CB_SINGLE_NON_CUP PAD_VIA4_SI_NON_CUP
}
#ENDIF
#ENDIF

#IFDEF PITCH_60_STAGGER
CBVIA4.R.1.OUTER.P60 { @ ratio of outer VIA4 to CB >= 0.05
  NET AREA RATIO OUTER_CB_ST_NON_CUP PAD_VIA4_ST_NON_CUP < 0.05
  [AREA(PAD_VIA4_ST_NON_CUP)/AREA(OUTER_CB_ST_NON_CUP)
  ] RDB via4_stagger_out_ratio.log OUTER_CB_ST_NON_CUP PAD_VIA4_ST_NON_CUP
}
CBVIA4.R.1.MID.INNER.P60 { @ ratio of inner VIA4 to CB >= 0.05
  NET AREA RATIO INNER_CB_ST_NON_CUP PAD_VIA4_ST_NON_CUP < 0.05
  [AREA(PAD_VIA4_ST_NON_CUP)/AREA(INNER_CB_ST_NON_CUP)
  ] RDB via4_stagger_in_ratio.log INNER_CB_ST_NON_CUP PAD_VIA4_ST_NON_CUP
}
#ELSE
#IFDEF PITCH_70_STAGGER
CBVIA4.R.1.OUTER.P70 { @ ratio of outer VIA4 to CB >= 0.05
  NET AREA RATIO OUTER_CB_ST_NON_CUP PAD_VIA4_ST_NON_CUP < 0.05
  [AREA(PAD_VIA4_ST_NON_CUP)/AREA(OUTER_CB_ST_NON_CUP)
  ] RDB via4_stagger_out_ratio.log OUTER_CB_ST_NON_CUP PAD_VIA4_ST_NON_CUP
}
CBVIA4.R.1.MID.INNER.P70 { @ ratio of inner VIA4 to CB >= 0.05
  NET AREA RATIO INNER_CB_ST_NON_CUP PAD_VIA4_ST_NON_CUP < 0.05
  [AREA(PAD_VIA4_ST_NON_CUP)/AREA(INNER_CB_ST_NON_CUP)
  ] RDB via4_stagger_in_ratio.log INNER_CB_ST_NON_CUP PAD_VIA4_ST_NON_CUP
}
#ELSE
#IFDEF PITCH_80_STAGGER
CBVIA4.R.1.OUTER.P80S { @ ratio of outer VIA4 to CB >= 0.05
  NET AREA RATIO OUTER_CB_ST_NON_CUP PAD_VIA4_ST_NON_CUP < 0.05
  [AREA(PAD_VIA4_ST_NON_CUP)/AREA(OUTER_CB_ST_NON_CUP)
  ] RDB via4_stagger_out_ratio.log OUTER_CB_ST_NON_CUP PAD_VIA4_ST_NON_CUP
}
CBVIA4.R.1.MID.INNER.P80S { @ ratio of inner VIA4 to CB >= 0.05
  NET AREA RATIO INNER_CB_ST_NON_CUP PAD_VIA4_ST_NON_CUP < 0.05
  [AREA(PAD_VIA4_ST_NON_CUP)/AREA(INNER_CB_ST_NON_CUP)
  ] RDB via4_stagger_in_ratio.log INNER_CB_ST_NON_CUP PAD_VIA4_ST_NON_CUP
}
#ENDIF
#ENDIF
#ENDIF

#IFDEF PITCH_80_TRITIER
CBVIA4.R.1.OUTER.P80T { @ ratio of outer VIA4 to CB >= 0.05
  NET AREA RATIO  OUTER_CB_TR_NON_CUP PAD_VIA4_TR_NON_CUP < 0.05
  [AREA(PAD_VIA4_TR_NON_CUP)/AREA(OUTER_CB_TR_NON_CUP)
  ] RDB via4_tri_tier_out_ratio.log OUTER_CB_TR_NON_CUP PAD_VIA4_TR_NON_CUP
}
CBVIA4.R.1.MID.INNER.P80T { @ ratio of inner/middle VIA4 to CB >= 0.05
  NET AREA RATIO  INNER_CB_TR_NON_CUP PAD_VIA4_TR_NON_CUP < 0.05
  [AREA(PAD_VIA4_TR_NON_CUP)/AREA(INNER_CB_TR_NON_CUP)
  ] RDB via4_tri_tier_in_ratio.log INNER_CB_TR_NON_CUP PAD_VIA4_TR_NON_CUP
  NET AREA RATIO  MID_CB_TR_NON_CUP PAD_VIA4_TR_NON_CUP < 0.05
  [AREA(PAD_VIA4_TR_NON_CUP)/AREA(MID_CB_TR_NON_CUP)
  ] RDB via4_tri_tier_mid_ratio.log MID_CB_TR_NON_CUP PAD_VIA4_TR_NON_CUP
}
#ENDIF
#IFDEF PITCH_50_SINGLE
CBVIA5.R.1.OUTER.P50 { @ ratio of outer VIA5 to CB >= 0.05
  NET AREA RATIO CB_SINGLE_NON_CUP PAD_VIA5_SI_NON_CUP < 0.05
  [AREA(PAD_VIA5_SI_NON_CUP)/AREA(CB_SINGLE_NON_CUP)
  ] RDB via5_single_ratio.log CB_SINGLE_NON_CUP PAD_VIA5_SI_NON_CUP
}
#ELSE
#IFDEF PITCH_55_SINGLE
CBVIA5.R.1.OUTER.P55 { @ ratio of outer VIA5 to CB >= 0.05
  NET AREA RATIO CB_SINGLE_NON_CUP PAD_VIA5_SI_NON_CUP < 0.05
  [AREA(PAD_VIA5_SI_NON_CUP)/AREA(CB_SINGLE_NON_CUP)
  ] RDB via5_single_ratio.log CB_SINGLE_NON_CUP PAD_VIA5_SI_NON_CUP
}
#ENDIF
#ENDIF

#IFDEF PITCH_60_STAGGER
CBVIA5.R.1.OUTER.P60 { @ ratio of outer VIA5 to CB >= 0.05
  NET AREA RATIO OUTER_CB_ST_NON_CUP PAD_VIA5_ST_NON_CUP < 0.05
  [AREA(PAD_VIA5_ST_NON_CUP)/AREA(OUTER_CB_ST_NON_CUP)
  ] RDB via5_stagger_out_ratio.log OUTER_CB_ST_NON_CUP PAD_VIA5_ST_NON_CUP
}
CBVIA5.R.1.MID.INNER.P60 { @ ratio of inner VIA5 to CB >= 0.05
  NET AREA RATIO INNER_CB_ST_NON_CUP PAD_VIA5_ST_NON_CUP < 0.05
  [AREA(PAD_VIA5_ST_NON_CUP)/AREA(INNER_CB_ST_NON_CUP)
  ] RDB via5_stagger_in_ratio.log INNER_CB_ST_NON_CUP PAD_VIA5_ST_NON_CUP
}
#ELSE
#IFDEF PITCH_70_STAGGER
CBVIA5.R.1.OUTER.P70 { @ ratio of outer VIA5 to CB >= 0.05
  NET AREA RATIO OUTER_CB_ST_NON_CUP PAD_VIA5_ST_NON_CUP < 0.05
  [AREA(PAD_VIA5_ST_NON_CUP)/AREA(OUTER_CB_ST_NON_CUP)
  ] RDB via5_stagger_out_ratio.log OUTER_CB_ST_NON_CUP PAD_VIA5_ST_NON_CUP
}
CBVIA5.R.1.MID.INNER.P70 { @ ratio of inner VIA5 to CB >= 0.05
  NET AREA RATIO INNER_CB_ST_NON_CUP PAD_VIA5_ST_NON_CUP < 0.05
  [AREA(PAD_VIA5_ST_NON_CUP)/AREA(INNER_CB_ST_NON_CUP)
  ] RDB via5_stagger_in_ratio.log INNER_CB_ST_NON_CUP PAD_VIA5_ST_NON_CUP
}
#ELSE
#IFDEF PITCH_80_STAGGER
CBVIA5.R.1.OUTER.P80S { @ ratio of outer VIA5 to CB >= 0.05
  NET AREA RATIO OUTER_CB_ST_NON_CUP PAD_VIA5_ST_NON_CUP < 0.05
  [AREA(PAD_VIA5_ST_NON_CUP)/AREA(OUTER_CB_ST_NON_CUP)
  ] RDB via5_stagger_out_ratio.log OUTER_CB_ST_NON_CUP PAD_VIA5_ST_NON_CUP
}
CBVIA5.R.1.MID.INNER.P80S { @ ratio of inner VIA5 to CB >= 0.05
  NET AREA RATIO INNER_CB_ST_NON_CUP PAD_VIA5_ST_NON_CUP < 0.05
  [AREA(PAD_VIA5_ST_NON_CUP)/AREA(INNER_CB_ST_NON_CUP)
  ] RDB via5_stagger_in_ratio.log INNER_CB_ST_NON_CUP PAD_VIA5_ST_NON_CUP
}
#ENDIF
#ENDIF
#ENDIF

#IFDEF PITCH_80_TRITIER
CBVIA5.R.1.OUTER.P80T { @ ratio of outer VIA5 to CB >= 0.05
  NET AREA RATIO  OUTER_CB_TR_NON_CUP PAD_VIA5_TR_NON_CUP < 0.05
  [AREA(PAD_VIA5_TR_NON_CUP)/AREA(OUTER_CB_TR_NON_CUP)
  ] RDB via5_tri_tier_out_ratio.log OUTER_CB_TR_NON_CUP PAD_VIA5_TR_NON_CUP
}
CBVIA5.R.1.MID.INNER.P80T { @ ratio of inner/middle VIA5 to CB >= 0.05
  NET AREA RATIO  INNER_CB_TR_NON_CUP PAD_VIA5_TR_NON_CUP < 0.05
  [AREA(PAD_VIA5_TR_NON_CUP)/AREA(INNER_CB_TR_NON_CUP)
  ] RDB via5_tri_tier_in_ratio.log INNER_CB_TR_NON_CUP PAD_VIA5_TR_NON_CUP
  NET AREA RATIO  MID_CB_TR_NON_CUP PAD_VIA5_TR_NON_CUP < 0.05
  [AREA(PAD_VIA5_TR_NON_CUP)/AREA(MID_CB_TR_NON_CUP)
  ] RDB via5_tri_tier_mid_ratio.log MID_CB_TR_NON_CUP PAD_VIA5_TR_NON_CUP
}
#ENDIF

//=end of Al Pad Structure for NON-CUP ===============
PAD_VIA_CUP5 = VIA5 INTERACT WBDMY
VIA_MERGE = SIZE PAD_VIA_CUP5 BY 0.7 OVERUNDER
VIA_SPACE = VIA_MERGE NOT PAD_VIA_CUP5
WBM5 = AND M5 WBDMY
WBM6 = AND M6 WBDMY

#IFDEF OBV_CUP

//Al Pad Structure for CUP RULE
//=================================

CUPCB.EN.2 { @  CB enclosure by MT >= 2um
  ENC CB_CUP M6 < 2 ABUT < 90 SINGULAR REGION
  CB_CUP OUTSIDE EDGE M6
}

CUPCB.R.2a { @ pad structure must be MT/VIAT/Mtop-1
  CB_CUP NOT INTERACT WBM6              
  CB_CUP NOT ENCLOSE VIA5
  CB_CUP NOT INTERACT WBM5
}

CUPCB.R.2b { @ VIAT must be exactly identical to CB in CUP pad
  CB_CUP1 = SIZE CB_CUP BY 2 OVERUNDER // FOR pad notch
  CB_CUP1 XOR PAD_VIA_CUP5 
}

WBDMY.S.1 { @ The minimum space of WBDMY to WBDMY >= 3um
  EXT WBDMY < 3 ABUT < 90 SINGULAR REGION
}

CUPVIAT.W.4 { @ The maximum width of top via in OBV CUP <= 150 um
  LENGTH PAD_VIA_CUP5 > 150
  NOT RECTANGLE PAD_VIA_CUP5
}

CUPVIAT.S.3 { @ The minimum space of one big via to one big via >= 7um
  EXT PAD_VIA_CUP5 < 7 ABUT < 90 SINGULAR REGION
}

//CUPVIAT.EN.2 is checked by CUPCB.EN.2. 

CUPVIAT.EN.3 { @ VIAtop enclosure by Mtop-1 except butted metal interconnection. == 0.2um
  ENC PAD_VIA_CUP5 M5 < 0.2 ABUT < 90 SINGULAR REGION
  A = SIZE PAD_VIA_CUP5 BY 0.2
  A1 = SIZE PAD_VIA_CUP5 BY 2.0
  B1 = M5 AND (A1 NOT A)
  C1 = A TOUCH OUTSIDE EDGE B1
  C2 = EXPAND EDGE C1 OUTSIDE BY 0.001
  C2 NOT INTERACT (C2 NOT B1)
  B = A INSIDE EDGE M5
  C = EXPAND EDGE B OUTSIDE BY 0.001
  D = M5 INTERACT C
  E = D NOT A
  E NOT INTERACT (VIA5 OR VIA4)
}

CUPVIAT.DN.1_ { @ The maximum density of top via across whole chip < 10 %
  DENSITY VIA5 >= 0.1 PRINT CUPVIAT.DN.1_.density
}

#ENDIF


//Al Pad Structure for CUP RULE
//=================================
#IFDEF TRL_CUP

CUPCB.EN.1 { @  CB enclosure by MT/MTop-1 >= 2um
  ENC CB_CUP M5 < 2 ABUT < 90 SINGULAR REGION
  CB_CUP OUTSIDE EDGE M5
  ENC CB_CUP M6 < 2 ABUT < 90 SINGULAR REGION
  CB_CUP OUTSIDE EDGE M6
}

CUPCB.R.1 { @ pad structure must be MT/VIAT/Mtop-1
  CB_CUP NOT INTERACT WBM6              
  CB_CUP NOT ENCLOSE VIA5
  CB_CUP NOT INTERACT WBM5
}


CUPVIAT.EN.1 { @ VIAT enclosure by metal >= 2
  ENC PAD_VIA_CUP5 M5  < 2 ABUT < 90 REGION
  ENC PAD_VIA_CUP5 M6 < 2 ABUT < 90 REGION
}

CUPVIAT.W.1 { @ CUPVIAT.W.2 is also checked. Width of VIAT must = 0.28um, Length of VIAT must = 3.44um
  NOT RECTANGLE PAD_VIA_CUP5 == 0.28 BY == 3.44 ORTHOGONAL ONLY
}
CUPVIAT.S.1 { @ space of two line VIAT (in parallel direction) = 1.3
  NOT RECTANGLE VIA_SPACE == 1.3 BY == 3.44 ORTHOGONAL ONLY 
}
CUPVIAT.S.2 { @ space of two line VIAT (in perpendicular direction) = 2
  X = EXT VIA_MERGE < 2.5 OPPOSITE REGION 
  NOT RECTANGLE X == 2 BY == 3.44 ORTHOGONAL ONLY
}  
  CONNECT PAD_VIA_CUP5 CB_CUP
CUPVIAT.DN.1 { @ Ratio of total mesh VIAT area to CB area < 0.08
  NET AREA RATIO CB_CUP PAD_VIA_CUP5 <0.08
  [AREA(PAD_VIA_CUP5)/AREA(CB_CUP)
  ] RDB via5_density.log CB_CUP PAD_VIA_CUP5
}  
#ENDIF

#IFNDEF TRL_CUP
#IFNDEF OBV_CUP
CUPCB.EN.3 { @  CB enclosure by MTOP >= 2um
  ENC CB_CUP M6 < 2 ABUT < 90 SINGULAR REGION
  CB_CUP OUTSIDE EDGE M6
}

CUPCB.R.4 { @ A specialized CUP pad structure must be applied to the top metal layers without top via
  CB_CUP NOT INTERACT WBM6
  CB_CUP AND VIA5
}

#ENDIF
#ENDIF

#IFDEF TRL_CUP
CUPCB.R.3 { @ Slots in Mtop and Mtop-1 pad region are not allowed
    HOLES M5CB_CUP
    HOLES M6CB_CUP
}
#ELSE
#IFDEF OBV_CUP
CUPCB.R.3 { @ Slots in Mtop and Mtop-1 pad region are not allowed
    HOLES M5CB_CUP
    HOLES M6CB_CUP
}
#ELSE
CUPCB.R.3.1 { @ Slots in Mtop pad region are not allowed
    HOLES M6CB_CUP
}
#ENDIF 
#ENDIF

//==end of Al PAD structure for CUP===========================================


//===DFSP structure for copper bond===
//Diamond via array + TRL
PAD_VIA_NON_CUP5 = (VIA5 INTERACT PAD_CB) NOT INTERACT WBDMY
VIA_MERGE_NON_CUP = SIZE PAD_VIA_NON_CUP5 BY 0.7 OVERUNDER
VIA_SPACE_NON_CUP = VIA_MERGE_NON_CUP NOT PAD_VIA_NON_CUP5
#IFDEF TRL_DFS


DFSCB.EN.1 { @  CB enclosure by MT/MTop-1 >= 2um
  ENC CB_NON_CUP M5 < 2 ABUT < 90 SINGULAR REGION
  CB_NON_CUP OUTSIDE EDGE M5
  ENC CB_NON_CUP M6 < 2 ABUT < 90 SINGULAR REGION
  CB_NON_CUP OUTSIDE EDGE M6
}

//DFSCB.R.1 is un-checkable

DFSVIAT.EN.1 { @ VIAT enclosure by metal >= 2
  ENC PAD_VIA_NON_CUP5 M5  < 2 ABUT < 90 REGION
  ENC PAD_VIA_NON_CUP5 M6 < 2 ABUT < 90 REGION
}

DFSVIAT.W.1 { @ DFSVIAT.W.2 is also checked. Width of VIAT must = 0.28um, Length of VIAT must = 3.44um
  NOT RECTANGLE PAD_VIA_NON_CUP5 == 0.28 BY == 3.44 ORTHOGONAL ONLY
}
DFSVIAT.S.1 { @ space of two line VIAT (in parallel direction) = 1.3
  NOT RECTANGLE VIA_SPACE_NON_CUP == 1.3 BY == 3.44 ORTHOGONAL ONLY 
}
DFSVIAT.S.2 { @ space of two line VIAT (in perpendicular direction) = 2
  X = EXT VIA_MERGE_NON_CUP < 2.5 OPPOSITE REGION 
  NOT RECTANGLE X == 2 BY == 3.44 ORTHOGONAL ONLY
}  

  CONNECT PAD_VIA_NON_CUP5 CB_NON_CUP
DFSVIAT.DN.1 { @ Ratio of total mesh VIAT area to CB area >= 0.08
  NET AREA RATIO CB_NON_CUP PAD_VIA_NON_CUP5 <0.08
  [AREA(PAD_VIA_NON_CUP5)/AREA(CB_NON_CUP)
  ] RDB via5_density.log CB_NON_CUP PAD_VIA_NON_CUP5
}  
#ENDIF

//Diamond via array + OBV
#IFDEF OBV_DFS

DFSCB.EN.5 { @  CB enclosure by MT >= 2um
  ENC CB_NON_CUP M6 < 2 ABUT < 90 SINGULAR REGION
  CB_NON_CUP OUTSIDE EDGE M6
}
DFSCB.R.2 { @ VIAT must be exactly identical to CB in DFS pad
   CB_NON_CUP1 = SIZE CB_NON_CUP BY 2 OVERUNDER // FOR pad notch
   CB_NON_CUP1 XOR PAD_VIA_NON_CUP5 
}

DFSVIAT.W.4 { @ The maximum width of top via <= 150 um
  LENGTH PAD_VIA_NON_CUP5 > 150 
  NOT RECTANGLE PAD_VIA_NON_CUP5
}
DFSVIAT.S.3 { @ The minimum space of one big via to one big via >= 7um
  EXT PAD_VIA_NON_CUP5 < 7 ABUT < 90 SINGULAR REGION
}
DFSVIAT.EN.2 { @ VIAT enclosure by  MT >= 2
  ENC PAD_VIA_NON_CUP5 M6 < 2 ABUT < 90 REGION
  PAD_VIA_NON_CUP5 OUTSIDE EDGE M6
}
DFSVIAT.EN.3 { @ VIAtop enclosure by Mtop-1 except butted metal interconnection. == 0.2um
  ENC PAD_VIA_NON_CUP5 M5 < 0.2 ABUT < 90 SINGULAR REGION
  A = SIZE PAD_VIA_NON_CUP5 BY 0.2
  A1 = SIZE PAD_VIA_NON_CUP5 BY 2.0
  B1 = M5 AND (A1 NOT A)
  C1 = A TOUCH OUTSIDE EDGE B1
  C2 = EXPAND EDGE C1 OUTSIDE BY 0.001
  C2 NOT INTERACT (C2 NOT B1)
  B = A INSIDE EDGE M5
  C = EXPAND EDGE B OUTSIDE BY 0.001
  D = M5 INTERACT C
  E = D NOT A
  E NOT INTERACT (VIA5 OR VIA4)
}

DFSVIAT.DN.1_ { @ The maximum density of top via across whole chip < 10 %
  DENSITY VIA5 >= 0.1 PRINT DFSVIAT.DN.1_.density
}
#ENDIF
#IFDEF OBV_DFS
#IFDEF TRL_DFS
DFS_warning { @ OBV and TRL DFS can't be on the same chip
COPY CHIP
}
#ENDIF
#ENDIF
#IFDEF OBV_CUP
#IFDEF TRL_CUP
CUP_warning { @ OBV and TRL CUP can't be on the same chip
COPY CHIP
}
#ENDIF
#ENDIF

#IFDEF OBV_CUP
OBV.R.1 { @ OBV CUP and OBV DFS is on the same chip
   CB_NON_CUP1 = SIZE CB_NON_CUP BY 2 OVERUNDER // FOR pad notch
   CB_NON_CUP1 XOR PAD_VIA_NON_CUP5 
}
#ENDIF

#IFDEF OBV_DFS
DFSOBV.R.1 { @ OBV CUP and OBV DFS is on the same chip.
  CB_CUP1 = SIZE CB_CUP BY 2 OVERUNDER // FOR pad notch
  CB_CUP1 XOR PAD_VIA_CUP5 
}
#ENDIF


#IFDEF TRL_CUP
TRL.R.1a { @ TRL CUP and TRL DFS are on the same chip
  NOT RECTANGLE PAD_VIA_NON_CUP5 == 0.28 BY == 3.44 ORTHOGONAL ONLY
} 
#ENDIF
#IFDEF TRL_DFS
TRL.R.1b { @ TRL CUP and TRL DFS are on the same chip
  NOT RECTANGLE PAD_VIA_CUP5 == 0.28 BY == 3.44 ORTHOGONAL ONLY
}
#ENDIF

// TRL.R.1 is checked by TRL.R.1a
// TRL.R.1 is checked by TRL.R.1b


#IFDEF OBV_DFS
#IFDEF MIX
OBV.R.2a { @ Only Single In-Line can be in OBV DFS
  COPY CHIP
}
#ENDIF
#IFNDEF PITCH_50_SINGLE
#IFNDEF PITCH_55_SINGLE
OBV.R.2b { @ Only Single In-Line can be in OBV DFS
  COPY CHIP
}
#ENDIF
#ENDIF
#ENDIF

#IFDEF OBV_CUP
#IFDEF MIX
OBV.R.2c { @ Only Single In-Line can be in OBV CUP
  COPY CHIP
}
#ENDIF
#IFNDEF PITCH_50_SINGLE
#IFNDEF PITCH_55_SINGLE
OBV.R.2d { @ Only Single In-Line can be in OBV CUP
  COPY CHIP
}
#ENDIF
#ENDIF
#ENDIF
//OBV.R.2 is checked by OBV.R.2a
//OBV.R.2 is checked by OBV.R.2b
//OBV.R.2 is checked by OBV.R.2c
//OBV.R.2 is checked by OBV.R.2d


